<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eksplorasi Minat Kerjaya STEM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --c-science: #22d3ee;
            --c-tech: #4ade80;
            --c-eng: #fb923c;
            --c-math: #c084fc;
        }
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #0c1121;
            background-image: 
                radial-gradient(white, rgba(255,255,255,0.2) 2px, transparent 40px),
                radial-gradient(white, rgba(255,255,255,0.15) 1px, transparent 30px),
                radial-gradient(white, rgba(255,255,255,0.1) 2px, transparent 40px),
                radial-gradient(rgba(255,255,255,0.4), rgba(255,255,255,0.1) 2px, transparent 30px);
            background-size: 550px 550px, 350px 350px, 250px 250px, 150px 150px; 
            background-position: 0 0, 40px 60px, 130px 270px, 70px 100px;
            animation: sparkle 15s linear infinite;
            color: #e2e8f0; /* slate-200 */
        }
        @keyframes sparkle {
            0% { background-position: 0 0, 40px 60px, 130px 270px, 70px 100px; }
            100% { background-position: -550px -550px, -350px -350px, -250px -250px, -150px -150px; }
        }
        .glass-effect {
            background: rgba(15, 23, 42, 0.65);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(100, 116, 139, 0.3);
            border-radius: 1rem;
        }
        .btn-glowing {
            position: relative;
            transition: all 0.3s ease-in-out;
            overflow: hidden;
            border-radius: 0.75rem;
            padding: 2px;
            display: inline-block;
        }
        .btn-glowing:before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300%;
            height: 300%;
            background: conic-gradient(from 180deg at 50% 50%, var(--c-science), var(--c-math), #f472b6, var(--c-tech), var(--c-science));
            transform-origin: center;
            animation: spin 3s linear infinite;
            transform: translate(-50%, -50%);
        }
        .btn-glowing span {
            position: relative;
            z-index: 1;
            background: #1e293b;
            display: block;
            padding: 0.75rem 1.5rem;
            border-radius: 0.65rem;
            transition: background 0.2s ease;
        }
        .btn-glowing:hover span {
             background: #334155;
        }
        @keyframes spin {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }
        .tab-btn {
            background-color: rgba(30, 41, 59, 0.5);
            border: 1px solid #334155;
        }
        .tab-active {
            background-color: var(--c-science);
            color: #0f172a;
            box-shadow: 0 0 20px var(--c-science);
            border-color: var(--c-science);
        }
        .modal-backdrop {
            background-color: rgba(0,0,0,0.7);
            backdrop-filter: blur(8px);
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1e293b; }
        ::-webkit-scrollbar-thumb { background: var(--c-science); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #67e8f9; }
        .modal-enter { animation: fadeInUp 0.5s ease-out forwards; }
        .modal-exit { animation: fadeOutDown 0.5s ease-in forwards; }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translate3d(0, 50px, 0) scale(0.95); }
            to { opacity: 1; transform: translate3d(0, 0, 0) scale(1); }
        }
        @keyframes fadeOutDown {
            from { opacity: 1; transform: translate3d(0, 0, 0) scale(1); }
            to { opacity: 0; transform: translate3d(0, 50px, 0) scale(0.95); }
        }
        #welcome-progress { animation: progress-bar 15s linear forwards; }
        @keyframes progress-bar {
            from { width: 100%; }
            to { width: 0%; }
        }
        .option-btn {
            transition: all 0.3s ease;
            border: 2px solid #334155;
        }
        .option-btn:hover {
            background-color: rgba(34, 211, 238, 0.2);
            border-color: var(--c-science);
            transform: translateX(10px);
        }
        .option-selected {
            background-color: var(--c-science) !important;
            color: #0f172a !important;
            border-color: var(--c-science) !important;
            font-weight: 600;
        }
        .inner-card {
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(51, 65, 85, 0.7);
            border-radius: 0.75rem;
            padding: 1rem;
        }
        .career-card {
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid rgba(51, 65, 85, 1);
            border-radius: 0.75rem;
            padding: 1.25rem;
            transition: all 0.3s ease;
        }
        .career-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        .activity-card {
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .activity-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.4);
        }
        .activity-card-icon {
            position: absolute;
            right: -15px;
            bottom: -15px;
            font-size: 5rem;
            color: rgba(255,255,255,0.05);
            transition: transform 0.3s ease;
        }
        .activity-card:hover .activity-card-icon {
            transform: rotate(-15deg) scale(1.1);
        }
        .category-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .category-header svg {
            width: 2rem;
            height: 2rem;
            opacity: 0.8;
        }
        .leaderboard-row:nth-child(1) { background: rgba(255, 215, 0, 0.1); }
        .leaderboard-row:nth-child(2) { background: rgba(192, 192, 192, 0.1); }
        .leaderboard-row:nth-child(3) { background: rgba(205, 127, 50, 0.1); }
    </style>
</head>
<body class="bg-slate-900 text-slate-200">

    <!-- Container Utama -->
    <div class="container mx-auto p-4 md:p-8">
        
        <!-- Header -->
        <header class="text-center mb-8 glass-effect p-6">
            <h1 class="text-4xl md:text-6xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 via-fuchsia-500 to-yellow-400 animate-pulse">
                Eksplorasi Minat Kerjaya STEM
            </h1>
            <p class="mt-2 text-slate-400">Temui Potensi Anda dalam Dunia Sains, Teknologi, Kejuruteraan dan Matematik</p>
        </header>

        <!-- Navigasi Tab -->
        <nav class="flex justify-center flex-wrap gap-2 mb-8">
            <button data-tab="utama" class="tab-btn px-6 py-2 rounded-lg font-semibold transition-all duration-300 tab-active">Utama</button>
            <button data-tab="kuiz" class="tab-btn px-6 py-2 rounded-lg font-semibold transition-all duration-300">Kuiz Minat Kerjaya</button>
            <button data-tab="peserta" class="tab-btn px-6 py-2 rounded-lg font-semibold transition-all duration-300">Senarai Peserta</button>
            <button data-tab="graf" class="tab-btn px-6 py-2 rounded-lg font-semibold transition-all duration-300">Data Graf Interaktif</button>
            <button data-tab="sijil" class="tab-btn px-6 py-2 rounded-lg font-semibold transition-all duration-300">Sijil</button>
        </nav>

        <!-- Kandungan Tab -->
        <main>
            <!-- Halaman Utama -->
            <div id="utama" class="tab-content space-y-12">
                <!-- Peringkat Aktiviti -->
                <div id="activity-levels" class="space-y-8">
                    <!-- STEM Junior -->
                    <section id="junior" class="glass-effect p-6">
                        <h2 onclick="promptForLevel('junior')" class="text-3xl font-bold text-center mb-6 text-lime-400 cursor-pointer hover:text-lime-300 transition-colors">STEM Junior</h2>
                        <div data-level-content="junior" class="hidden space-y-6 mt-4">
                             <!-- Content will be populated by JS -->
                        </div>
                    </section>
                    <!-- STEM Intermediate -->
                    <section id="intermediate" class="glass-effect p-6">
                        <h2 onclick="promptForLevel('intermediate')" class="text-3xl font-bold text-center mb-6 text-amber-400 cursor-pointer hover:text-amber-300 transition-colors">STEM Intermediate</h2>
                        <div data-level-content="intermediate" class="hidden space-y-6 mt-4">
                            <!-- Content will be populated by JS -->
                        </div>
                    </section>
                    <!-- STEM Senior -->
                    <section id="senior" class="glass-effect p-6">
                        <h2 onclick="promptForLevel('senior')" class="text-3xl font-bold text-center mb-6 text-rose-400 cursor-pointer hover:text-rose-300 transition-colors">STEM Senior</h2>
                        <div data-level-content="senior" class="hidden space-y-6 mt-4">
                            <!-- Content will be populated by JS -->
                        </div>
                    </section>
                </div>
                
                 <!-- Pautan Borang Google -->
                <div class="text-center mt-12 glass-effect p-6">
                    <h3 class="text-2xl font-bold mb-4">Selesai Aktiviti? Daftarkan Penyertaan Anda!</h3>
                    <p class="mb-6 text-slate-300">Pastikan anda merekod setiap aktiviti yang telah diselesaikan untuk melayakkan anda menerima lencana dan sijil.</p>
                    <a href="https://docs.google.com/forms/d/e/1FAIpQLSfXyJifomHky2HEog8ODOAn1Ulrx_phFyA3B-KB_lq1lyrGHw/viewform?usp=header" target="_blank" class="btn-glowing">
                        <span class="font-bold">Borang Pendaftaran Aktiviti</span>
                    </a>
                </div>

                <!-- Info Tambahan -->
                <div class="grid md:grid-cols-2 gap-8 mt-12">
                    <div class="glass-effect p-6">
                        <h3 class="text-2xl font-bold mb-4 text-cyan-400">Info STEM & Kerjaya</h3>
                        <p class="text-slate-300">STEM adalah kunci kepada inovasi dan penyelesaian masalah global. Kerjaya dalam bidang STEM seperti jurutera perisian, penganalisis data, dan pakar bioteknologi bukan sahaja mempunyai permintaan tinggi tetapi juga menawarkan peluang untuk membentuk masa depan. Setiap aktiviti di sini direka untuk mendedahkan anda kepada kemahiran asas yang diperlukan dalam kerjaya ini.</p>
                    </div>
                    <div class="glass-effect p-6">
                        <h3 class="text-2xl font-bold mb-4 text-fuchsia-400">Kaitan dengan RIASEC & Kecerdasan Pelbagai</h3>
                        <p class="text-slate-300">Setiap individu unik. Teori Holland (RIASEC) membantu memadanan personaliti anda (Realistic, Investigative, Artistic, Social, Enterprising, Conventional) dengan persekritan kerja. Teori Kecerdasan Pelbagai Gardner pula mengenal pasti kekuatan anda (cth., Logik-Matematik, Visual-Ruang). Aplikasi ini mengaitkan aktiviti dengan kedua-dua teori ini untuk membantu anda memahami minat dan kecenderungan kerjaya anda dengan lebih mendalam.</p>
                    </div>
                </div>

                <!-- Cara Laksana & Amaran -->
                 <footer class="mt-12 text-center glass-effect p-6">
                    <h3 class="text-xl font-bold text-yellow-400">Cara Pelaksanaan & Amaran Keselamatan</h3>
                    <p class="mt-2 text-slate-400 max-w-3xl mx-auto"><b class="text-white">Badge Pakar STEM</b> akan diberikan apabila anda berjaya menyelesaikan sekurang-kurangnya <strong>DUA (2)</strong> aktiviti dari setiap tahap (Junior, Intermediate, Senior). Pastikan anda mendaftar setiap aktiviti yang selesai.</p>
                    <p class="mt-4 text-red-400 font-bold border border-red-400 rounded-lg p-3 inline-block">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>
                        AMARAN: Semua aktiviti MESTI dijalankan dengan pengawasan ibu bapa atau guru.
                    </p>
                </footer>
            </div>

            <!-- Halaman Kuiz Minat Kerjaya -->
            <div id="kuiz" class="tab-content hidden">
                 <!-- Main Content -->
                <div class="mx-auto">
                    <!-- Quiz Tab -->
                    <div id="quiz-tab-content">
                        <div class="glass-effect p-8">
                            <div id="quiz-intro" class="text-center">
                                <h2 class="text-3xl font-bold mb-4 text-cyan-400">🎯 Kuiz Minat STEM</h2>
                                <p class="text-lg mb-6 text-slate-300">Jawab 10 soalan untuk mengetahui bidang STEM yang paling sesuai dengan anda!</p>
                                <button onclick="startQuiz()" class="btn-glowing">
                                    <span class="text-white font-semibold">Mula Kuiz</span>
                                </button>
                            </div>
            
                            <div id="quiz-content" class="hidden">
                                <div class="mb-6">
                                    <div class="flex justify-between items-center mb-4">
                                        <span class="text-cyan-400 font-semibold">Soalan <span id="current-question">1</span> daripada 10</span>
                                        <div class="bg-slate-700 rounded-full h-3 w-48">
                                            <div id="progress-bar" class="bg-gradient-to-r from-cyan-400 to-purple-500 h-3 rounded-full transition-all duration-500" style="width: 10%"></div>
                                        </div>
                                    </div>
                                </div>
            
                                <div id="question-container" class="glass-effect p-6 mb-6">
                                    <h3 id="question-text" class="text-xl font-semibold mb-6 text-center"></h3>
                                    <div id="options-container" class="space-y-3">
                                        <!-- Options will be populated by JavaScript -->
                                    </div>
                                </div>
            
                                <div class="flex justify-between">
                                    <button onclick="previousQuestion()" id="prev-btn" class="px-6 py-3 bg-slate-600 hover:bg-slate-500 rounded-lg font-semibold transition-all duration-300 disabled:opacity-50" disabled>
                                        ← Sebelum
                                    </button>
                                    <button onclick="nextQuestion()" id="next-btn" class="px-6 py-3 bg-cyan-600 hover:bg-cyan-500 rounded-lg font-semibold transition-all duration-300 disabled:opacity-50" disabled>
                                        Seterusnya →
                                    </button>
                                </div>
                            </div>
            
                            <div id="quiz-results" class="hidden text-center">
                                <h2 class="text-3xl font-bold mb-6 text-cyan-400">🎉 Keputusan Kuiz Anda</h2>
                                
                                <!-- Summary -->
                                <div id="results-content" class="space-y-4 mb-8"></div>
                            
                                <!-- Chart -->
                                <h3 class="text-2xl font-bold mb-4 text-center text-cyan-400">📈 Analisis Pecahan Skor</h3>
                                <div id="chart-container" class="mb-8 max-w-2xl mx-auto" style="min-height: 250px;">
                                    <canvas id="resultsChart"></canvas>
                                </div>
                            
                                <!-- Detailed Breakdown -->
                                <div id="detailed-results" class="grid md:grid-cols-2 gap-6 max-w-2xl mx-auto"></div>
                            
                                <button onclick="resetQuiz()" class="mt-8 btn-glowing">
                                    <span class="text-white font-semibold">🔄 Ambil Kuiz Lagi</span>
                                </button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <!-- Halaman Senarai Peserta -->
            <div id="peserta" class="tab-content hidden">
                <div class="glass-effect p-6">
                    <h2 class="text-3xl font-bold text-center mb-6">Senarai Peserta</h2>
                    <div id="loading-peserta" class="text-center py-8">
                        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-400 mx-auto"></div>
                        <p class="mt-4">Memuatkan data dari Google Sheet...</p>
                    </div>
                    <div class="overflow-x-auto">
                        <table id="peserta-table" class="w-full text-left table-auto hidden">
                            <thead class="bg-slate-800">
                                <tr>
                                    <!-- Header akan diisi oleh JS -->
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-700">
                                <!-- Data akan diisi oleh JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Halaman Graf -->
            <div id="graf" class="tab-content hidden">
                <div class="p-6">
                    <h2 class="text-3xl font-bold text-center mb-6">Papan Pemuka Data Interaktif</h2>
                     <div id="loading-graf" class="text-center py-8">
                        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-fuchsia-400 mx-auto"></div>
                        <p class="mt-4">Memuatkan dan memproses data graf...</p>
                    </div>

                    <div id="graf-grid" class="hidden grid grid-cols-1 lg:grid-cols-2 gap-8">
                        
                         <!-- AI Summary -->
                        <div class="lg:col-span-2 glass-effect p-6">
                            <div class="flex flex-wrap justify-between items-center gap-4 mb-4">
                                <h3 class="text-xl font-bold text-fuchsia-400">Rumusan Analisis AI</h3>
                                <button id="ai-summary-btn" class="btn-glowing">
                                    <span class="text-sm font-bold">✨ Jana Semula Rumusan</span>
                                </button>
                            </div>
                            <div id="ai-summary-content" class="text-slate-300 text-center">
                                <p id="ai-summary-loading" class="hidden">Menganalisis data...</p>
                                <p id="ai-summary-text">Klik butang untuk mendapatkan analisis data penyertaan terkini.</p>
                            </div>
                        </div>

                        <!-- Papan Pendahulu -->
                        <div class="lg:col-span-2 glass-effect p-6">
                            <h3 class="text-xl font-bold text-center mb-4 text-yellow-400">Papan Pendahulu (Aktiviti Terbanyak)</h3>
                             <div class="overflow-x-auto">
                                <table class="w-full max-w-lg mx-auto text-left table-auto">
                                    <thead class="bg-slate-800">
                                        <tr>
                                            <th class="px-4 py-2">#</th>
                                            <th class="px-4 py-2">Nama</th>
                                            <th class="px-4 py-2 text-center">Bilangan Aktiviti</th>
                                        </tr>
                                    </thead>
                                    <tbody id="leaderboard-body" class="divide-y divide-slate-700"></tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Populariti Kategori -->
                        <div class="glass-effect p-6">
                            <h3 class="text-xl font-bold text-center mb-4 text-cyan-400">Populariti Kategori STEM</h3>
                            <div style="position: relative; height:350px">
                                <canvas id="kategoriChartCanvas"></canvas>
                            </div>
                        </div>

                        <!-- Penyertaan Kelas -->
                        <div class="glass-effect p-6">
                            <h3 class="text-xl font-bold text-center mb-4 text-cyan-400">Penyertaan Mengikut Kelas (Top 10)</h3>
                             <div style="position: relative; height:350px">
                                <canvas id="kelasChartCanvas"></canvas>
                            </div>
                        </div>

                        <!-- Aktiviti Popular -->
                         <div class="lg:col-span-2 glass-effect p-6">
                            <h3 class="text-xl font-bold text-center mb-4 text-cyan-400">Aktiviti Paling Popular (Top 5)</h3>
                             <div style="position: relative; height:300px">
                                <canvas id="aktivitiChartCanvas"></canvas>
                            </div>
                        </div>
                        
                        <!-- Hubungan Tahap-Kategori -->
                         <div class="lg:col-span-2 glass-effect p-6">
                            <h3 class="text-xl font-bold text-center mb-4 text-cyan-400">Hubungan Antara Tahap & Kategori</h3>
                             <div style="position: relative; height:400px">
                                <canvas id="hubunganChartCanvas"></canvas>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Halaman Sijil -->
            <div id="sijil" class="tab-content hidden">
                <div class="glass-effect p-8 text-center max-w-4xl mx-auto">
                    <h2 class="text-3xl font-bold mb-4">Jana Sijil Penyertaan</h2>
                    <p class="mb-6 text-slate-300">Anda layak menjana sijil setelah melengkapkan syarat penyertaan. Sila masukkan kata kunci untuk meneruskan.</p>
                    <button onclick="showCertificateModal()" class="btn-glowing">
                        <span class="font-bold">Dapatkan Sijil Anda</span>
                    </button>
                    <div id="certificate-display" class="mt-8 hidden">
                        <h3 class="text-2xl font-bold mb-4">Tahniah! Ini Sijil Anda.</h3>
                        <canvas id="certificateCanvas" class="mx-auto border-2 border-blue-400 rounded-lg"></canvas>
                        <a id="download-cert-link" class="mt-6 inline-block bg-green-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-600 transition-colors">Muat Turun Sijil</a>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Modals -->
    <div id="welcome-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 modal-backdrop">
        <div id="welcome-modal-content" class="glass-effect p-8 rounded-lg shadow-xl w-full max-w-2xl text-center relative overflow-hidden">
            <h2 class="text-3xl font-bold mb-4 text-cyan-300">SELAMAT DATANG!</h2>
            <p class="text-slate-300 mb-6">
                “Aplikasi Eksplorasi Minat Kerjaya STEM ini sangat seronok kerana murid boleh cuba aktiviti yang sesuai dengan minat dan bakat masing-masing... Mari cuba dan lihat kerjaya STEM yang sesuai dengan diri kamu!”
            </p>
            <button id="close-welcome-btn" class="bg-cyan-500 hover:bg-cyan-600 text-slate-900 font-bold py-2 px-6 rounded-lg transition-all duration-300 shadow-lg shadow-cyan-500/30">Tutup</button>
            <div id="welcome-progress" class="absolute bottom-0 left-0 h-1 bg-cyan-400"></div>
        </div>
    </div>
    <div id="password-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 modal-backdrop hidden">
        <div class="glass-effect p-8 rounded-lg shadow-xl w-full max-w-md text-center">
            <h3 class="text-2xl font-bold mb-4" id="password-title"></h3>
            <p id="password-text" class="mb-4 text-slate-300"></p>
            <input type="text" id="password-input" class="w-full bg-slate-800 border border-slate-600 rounded-lg p-2 text-center text-white mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500">
            <div class="flex justify-center gap-4">
                <button id="password-submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg">Sahkan</button>
                <button onclick="closeModal('password-modal')" class="bg-slate-600 hover:bg-slate-700 text-white font-bold py-2 px-6 rounded-lg">Batal</button>
            </div>
        </div>
    </div>
    <div id="activity-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 modal-backdrop hidden">
        <div class="glass-effect p-6 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col">
            <div class="flex-shrink-0 flex justify-between items-center mb-4">
                <h3 class="text-2xl font-bold text-blue-300" id="activity-modal-title"></h3>
                <button onclick="closeModal('activity-modal')" class="text-3xl font-bold text-white">&times;</button>
            </div>
            <div class="overflow-y-auto pr-4 space-y-4">
                <div><h4 class="font-bold text-lg text-green-400">Langkah-langkah:</h4><div id="activity-modal-steps"></div></div>
                <div><h4 class="font-bold text-lg text-yellow-400">Personaliti Saya (RIASEC):</h4><p id="activity-modal-riasec"></p></div>
                <div><h4 class="font-bold text-lg text-purple-400">Saya Pandai (Kecerdasan Pelbagai):</h4><p id="activity-modal-mi"></p></div>
                <div><h4 class="font-bold text-lg text-pink-400">Contoh Kerjaya Hebat:</h4><p id="activity-modal-careers"></p></div>
                <div class="mt-4 pt-4 border-t border-slate-700"><h4 class="font-bold text-lg text-indigo-400">Rujukan Kaunseling:</h4><p id="activity-modal-guidance" class="text-sm"></p></div>
                <div class="mt-4 pt-4 border-t border-slate-700"><h4 class="font-bold text-lg text-cyan-400">✨ Kaunselor Kerjaya AI</h4><button id="ai-counselor-btn" class="mt-2 px-4 py-2 text-sm bg-cyan-600 hover:bg-cyan-700 rounded-lg disabled:opacity-50">Tanya Kaunselor AI</button><div id="ai-counselor-response" class="mt-2 hidden"><div id="ai-counselor-loading" class="hidden flex items-center justify-center"><div class="animate-spin rounded-full h-5 w-5 border-b-2 border-cyan-400"></div><span class="ml-2">Sedang berfikir...</span></div><p id="ai-counselor-text" class="text-sm whitespace-pre-wrap"></p></div></div>
            </div>
        </div>
    </div>
    <div id="certificate-info-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 modal-backdrop hidden">
        <div class="glass-effect p-8 rounded-lg shadow-xl w-full max-w-md text-center">
            <h3 class="text-2xl font-bold mb-4">Maklumat Sijil</h3>
            <p class="mb-4 text-slate-300">Sila isi nama penuh dan kelas anda.</p>
            <input type="text" id="cert-name" placeholder="Nama Penuh" class="w-full bg-slate-800 border border-slate-600 rounded-lg p-2 text-white mb-4">
            <input type="text" id="cert-class" placeholder="Kelas" class="w-full bg-slate-800 border border-slate-600 rounded-lg p-2 text-white mb-4">
            <div class="flex justify-center gap-4">
                <button onclick="generateCertificate()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg">Hantar</button>
                <button onclick="closeModal('certificate-info-modal')" class="bg-slate-600 hover:bg-slate-700 text-white font-bold py-2 px-6 rounded-lg">Batal</button>
            </div>
        </div>
    </div>
    <!-- Career Details Modal (from Quiz) -->
    <div id="career-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50 p-4">
        <div id="career-modal-content" class="glass-effect flex flex-col w-full max-w-3xl max-h-[90vh] rounded-lg">
             <div class="flex-shrink-0 p-6 border-b border-slate-700 flex justify-between items-center">
                <h2 id="modal-title" class="text-2xl md:text-3xl font-bold"></h2>
                <button onclick="closeModal('career-modal')" class="text-slate-400 hover:text-white text-3xl font-bold">&times;</button>
            </div>
            <div id="modal-content-body" class="overflow-y-auto p-6 space-y-6">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // --- DATA APLIKASI UTAMA---
        const activityData = {
            junior: {
                science: [
                    { title: "Pelangi Dalam Gelas", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Gelas tinggi lutsinar</li><li>Madu, Sirap, Sabun pinggan, Air berwarna, Minyak masak</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Tuang madu perlahan-lahan ke dalam gelas.</li><li>Kemudian, tuang sabun pinggan.</li><li>Selepas itu, tuang air berwarna.</li><li>Akhir sekali, tuang minyak masak.</li><li>Lihat! Anda ada pelangi berlapis-lapis!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Setiap cecair ada 'berat' yang berbeza. Yang paling berat seperti madu akan duduk di bawah, dan yang paling ringan seperti minyak akan terapung di atas.</p>", riasec: "<b>Suka Menyiasat (Investigative)</b>: Kamu suka memerhati dan ingin tahu kenapa sesuatu terjadi.", mi: "Pandai Logik, Pandai Lihat Ruang.", careers: "Ahli Sains Makanan, Ahli Kimia, Pakar Oseanografi (kaji lapisan laut).", panduanKaunselor: "Gunakan aktiviti ini untuk meneroka konsep 'sifat tersembunyi'. Bincangkan dengan murid bagaimana sesuatu yang nampak bercampur (seperti air laut) sebenarnya mempunyai lapisan dan sifat yang berbeza. Kaitkan dengan personaliti murid: 'Kadang-kadang kita pun ada lapisan berbeza, kan? Ada masa kita gembira, ada masa kita sedih.' Ini membantu membina kesedaran kendiri." },
                    { title: "Taman Mini Ajaib", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Botol plastik besar</li><li>Batu kecil, tanah, tumbuhan kecil (macam rumput)</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Minta orang dewasa potong botol kepada dua.</li><li>Di bahagian bawah botol, letak batu-batu kecil.</li><li>Kemudian, masukkan tanah dan tanam tumbuhan kecil anda.</li><li>Sembur sedikit air.</li><li>Tutup semula dengan bahagian atas botol dan lekatkan.</li><li>Letak di tempat bercahaya.</li></ol><br><p><b>Kenapa jadi macam tu?</b> Anda telah membina sebuah rumah untuk tumbuhan! Di dalamnya ada 'hujan mini'. Air akan naik ke atas dan turun semula, jadi pokok boleh minum air setiap hari.</p>", riasec: "<b>Suka Alam Semula Jadi (Realistic)</b>: Kamu suka menanam dan menjaga tumbuhan.", mi: "Pandai Alam, Pandai Lihat Ruang.", careers: "Ahli Botani, Saintis Alam Sekitar, Arkitek Landskap.", panduanKaunselor: "Aktiviti ini adalah metafora untuk 'tanggungjawab' dan 'penjagaan'. Bincangkan kepentingan menjaga sesuatu yang hidup. Tanya: 'Apa yang diperlukan oleh tumbuhan ini untuk hidup? Apa pula yang kamu perlukan untuk membesar dengan sihat?' Kaitkan dengan penjagaan diri dan matlamat masa depan." },
                    { title: "Bunga Kertas Kembang", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Kertas, pensel warna, gunting</li><li>Satu besen berisi air</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Lukis dan warnakan gambar bunga.</li><li>Gunting gambar bunga itu.</li><li>Lipat kelopak bunga ke arah tengah.</li><li>Letakkan bunga kertas di atas air.</li><li>Tunggu dan lihat! Bunga akan kembang dengan sendirinya! Ajaib!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Kertas suka 'minum' air. Apabila kertas basah, ia jadi berat dan terbuka semula. Macam bunga yang kembang di waktu pagi!</p>", riasec: "<b>Suka Seni (Artistic)</b>: Kamu kreatif dan suka melukis.", mi: "Pandai Seni, Pandai Alam.", careers: "Artis Saintifik, Pereka Corak, Jurutera Bahan (kaji sifat kertas).", panduanKaunselor: "Gunakan untuk meneroka tema 'transformasi' atau 'perubahan'. Bunga yang kuncup menjadi kembang. Bincangkan perubahan yang murid alami (cth: dari Tahun 1 ke Tahun 2). 'Perubahan mana yang seronok? Perubahan mana yang menakutkan?' Aktiviti ini boleh menjadi pemula perbualan tentang daya tahan (resilience)." },
                    { title: "Hidung atau Lidah?", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Potongan kecil epal dan kentang.</li><li>Kain penutup mata.</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Tutup mata kawan anda.</li><li>Minta dia picit hidung dan rasa sepotong epal. Tanya dia, 'ini apa?'.</li><li>Kemudian, suruh dia rasa kentang pula (masih picit hidung).</li><li>Sekarang, suruh dia rasa sekali lagi tanpa picit hidung. Adakah dia boleh teka dengan betul?</li></ol><br><p><b>Kenapa jadi macam tu?</b> Lidah kita merasa masin, manis, masam dan pahit. Tapi hidung kita yang 'memberitahu' otak rasa sebenar makanan! Hidung dan lidah bekerjasama.</p>", riasec: "<b>Suka Menyiasat (Investigative)</b>: Kamu suka membuat eksperimen ke atas kawan-kawan!", mi: "Pandai Bergaul, Pandai Fikir.", careers: "Doktor (pakar ENT), Chef Eksekutif, Penganalisis Deria Rasa.", panduanKaunselor: "Fokus pada tema 'kerjasama' dan 'persepsi'. Bincangkan bagaimana deria kita bekerjasama untuk memberi kita gambaran penuh. Kaitkan dengan kerja kumpulan: 'Kenapa penting untuk kita bekerjasama dengan kawan-awan? Apa jadi kalau satu deria (atau seorang kawan) tak berfungsi?' Ini mengajar tentang kepentingan setiap peranan dalam satu pasukan." }
                ],
                technology: [
                    { title: "Dakwat Halimunan", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Jus lemon atau limau</li><li>Putik kapas (cotton bud), kertas putih</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Celup putik kapas dalam jus lemon.</li><li>Tulis mesej rahsia di atas kertas.</li><li>Biarkan ia kering. Tulisan akan hilang!</li><li>Untuk baca, minta orang dewasa panaskan kertas dengan seterika atau pengering rambut.</li><li>Mesej rahsia akan muncul!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Jus lemon akan menjadi perang bila dipanaskan. Ia seperti helah ejen perisik!</p>", riasec: "<b>Suka Menyiasat (Investigative)</b>: Kamu suka benda-benda rahsia dan teka-teki.", mi: "Pandai Logik.", careers: "Pakar Forensik, Ejen Perisikan, Sejarawan (kaji dokumen lama).", panduanKaunselor: "Gunakan sebagai alat untuk membincangkan tentang 'rahsia' dan 'kepercayaan'. Tanya murid: 'Apakah jenis rahsia yang baik untuk disimpan? Apakah rahsia yang perlu kita beritahu kepada orang dewasa?' Ini boleh membuka perbualan tentang keselamatan peribadi dan buli siber." },
                    { title: "Lampu Menyala!", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Sebiji bateri, sebiji mentol kecil</li><li>Kerajang aluminium (aluminium foil)</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Minta orang dewasa untuk bantu.</li><li>Gunting dua jalur kerajang aluminium.</li><li>Pegang satu jalur di bahagian bawah (negatif) bateri dan sentuhkan hujungnya pada sisi mentol.</li><li>Pegang jalur kedua di bahagian atas (positif) bateri dan sentuhkan hujungnya pada tapak mentol.</li><li>Lampu akan menyala!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Anda telah membuat satu 'jalan' untuk elektrik bergerak dari bateri ke mentol dan kembali semula. Ini dipanggil litar elektrik.</p>", riasec: "<b>Suka Membina (Realistic)</b>: Kamu suka mencuba dan melihat bagaimana sesuatu berfungsi.", mi: "Pandai Logik, Pandai Guna Tangan.", careers: "Jurutera Elektrik, Mekanik Kapal Terbang, Pereka Lampu Pentas.", panduanKaunselor: "Aktiviti ini melambangkan 'hubungan' dan 'komunikasi'. Terangkan bahawa litar hanya berfungsi jika ada sambungan yang lengkap. Kaitkan dengan persahabatan: 'Apa yang berlaku pada litar (persahabatan) jika ada satu sambungan yang terputus?' Ini boleh digunakan untuk kaunseling kelompok tentang komunikasi." },
                    { title: "Telefon Cawan", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Dua cawan kertas</li><li>Benang panjang</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Minta orang dewasa tebuk lubang kecil di bawah setiap cawan.</li><li>Masukkan benang melalui lubang dan ikat supaya tidak tercabut.</li><li>Beri satu cawan kepada kawan. Berjalan jauh sehingga benang menjadi tegang.</li><li>Seorang bercakap di dalam cawan, seorang lagi mendengar. Anda boleh dengar tak?</li></ol><br><p><b>Kenapa jadi macam tu?</b> Suara anda membuat benang bergetar. Getaran itu bergerak melalui benang ke cawan kawan anda, dan telinganya dapat mendengar getaran itu sebagai bunyi.</p>", riasec: "<b>Suka Membina (Realistic)</b>: Kamu suka membuat alatan sendiri.", mi: "Pandai Bergaul, Pandai Muzik.", careers: "Jurutera Telekomunikasi, Penyampai Radio, Pakar Terapi Pertuturan.", panduanKaunselor: "Fokus pada 'kemahiran mendengar' dan 'komunikasi yang jelas'. Selepas bermain, minta murid bincangkan: 'Adakah sukar untuk mendengar? Kenapa? Apa yang anda buat supaya kawan anda faham?' Gunakan ini sebagai latihan untuk mendengar secara aktif dan empati." },
                    { title: "Penapis Air Bersih", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Botol plastik, gunting</li><li>Kapas, pasir, batu kecil</li><li>Air kotor (campur sedikit tanah dalam air)</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Minta orang dewasa potong botol kepada dua.</li><li>Terbalikkan bahagian atas botol dan masukkan ke dalam bahagian bawah.</li><li>Letak kapas di muncung botol.</li><li>Kemudian masukkan lapisan pasir.</li><li>Akhir sekali, letak lapisan batu kecil.</li><li>Tuang air kotor perlahan-lahan. Lihat air yang keluar! Lebih jernih kan?</li></ol><br><p><b>Kenapa jadi macam tu?</b> Setiap lapisan menapis kotoran yang berbeza saiz. Ini cara mudah untuk meniru sistem penapisan air sebenar.</p>", riasec: "<b>Suka Menyiasat (Investigative)</b>: Kamu suka menyelesaikan masalah seperti 'bagaimana nak bersihkan air?'.", mi: "Pandai Alam, Pandai Logik.", careers: "Jurutera Awam (Air), Pakar Kualiti Air, Aktivis Alam Sekitar.", panduanKaunselor: "Gunakan sebagai metafora untuk 'menyelesaikan masalah' atau 'menapis perkara negatif'. Bincangkan bagaimana penapis ini membuang kotoran. Kaitkan dengan emosi: 'Bagaimana kita boleh menapis fikiran yang tidak baik atau kata-kata negatif daripada kawan?' Ini membantu mengajar kemahiran daya tindak (coping skills)." }
                ],
                engineering: [
                    { title: "Jambatan Kertas Kuat", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Sekeping kertas A4</li><li>Dua buah buku sama tebal</li><li>Duit syiling</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Letak dua buku dengan jarak sedikit.</li><li>Letak kertas di atasnya untuk jadi jambatan. Berapa banyak syiling boleh ditampung?</li><li>Sekarang, lipat kertas itu seperti kipas.</li><li>Letak semula di atas buku. Cuba letak syiling lagi. Mesti boleh tahan lebih banyak!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Bentuk yang berlipat-lipat adalah lebih kuat daripada yang rata. Sebab itu bumbung rumah selalunya beralun!</p>", riasec: "<b>Suka Membina (Realistic)</b>: Kamu suka mereka cipta dan menguji kekuatan.", mi: "Pandai Logik, Pandai Guna Tangan.", careers: "Jurutera Struktur, Arkitek, Pereka Set Pentas.", panduanKaunselor: "Jadikan ini sebagai pelajaran tentang 'kekuatan dalaman' dan 'sokongan'. Bincangkan kenapa bentuk yang berlipat lebih kuat. Kaitkan dengan diri murid: 'Apa yang membuatkan kamu rasa kuat? Siapa yang menjadi sistem sokongan kamu (seperti buku)?' Ini membantu murid mengenal pasti sumber kekuatan mereka." },
                    { title: "Roket Belon Laju", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Belon, penyedut minuman (straw)</li><li>Benang panjang, pita pelekat</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Masukkan benang melalui straw.</li><li>Ikat hujung benang pada dua kerusi.</li><li>Tiup belon tapi jangan ikat. Kepit dengan jari.</li><li>Lekatkan belon pada straw.</li><li>Lepaskan belon! Fuhhh! Luncurnya laju!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Angin yang keluar ke belakang menolak roket belon ke hadapan. Roket sebenar pun guna cara yang sama!</p>", riasec: "<b>Suka Membina (Realistic)</b>: Kamu suka melihat benda bergerak laju.", mi: "Pandai Guna Badan, Pandai Lihat Ruang.", careers: "Saintis Roket, Jurutera Aeroangkasa, Juruterbang Pejuang.", panduanKaunselor: "Gunakan untuk membincangkan konsep 'matlamat' dan 'motivasi'. Roket perlu ada 'tujahan' untuk bergerak. Tanya murid: 'Apa 'tujahan' atau pendorong kamu untuk datang ke sekolah setiap hari? Apa matlamat yang kamu nak capai?'" },
                    { title: "Payung Terjun Mainan", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Beg plastik, benang, gunting</li><li>Pita pelekat</li><li>Patung mainan kecil</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Gunting beg plastik menjadi bentuk segi empat sama besar.</li><li>Ikat benang pada setiap empat bucu beg plastik.</li><li>Ikat semua hujung benang pada patung mainan.</li><li>Naik atas kerusi (hati-hati!) dan jatuhkan.</li><li>Lihat mainan anda turun perlahan-lahan. Selamat mendarat!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Payung terjun memerangkap udara di bawahnya. Udara itu melambatkan kejatuhan, macam brek angin.</p>", riasec: "<b>Suka Mereka Cipta (Realistic)</b>: Kamu suka membuat sesuatu untuk menyelesaikan masalah.", mi: "Pandai Guna Tangan, Pandai Lihat Ruang.", careers: "Jurutera Keselamatan, Pereka Payung Terjun, Angkasawan (kapsul mendarat).", panduanKaunselor: "Fokus pada tema 'keselamatan' dan 'mengambil risiko yang terancang'. Bincangkan kenapa payung terjun penting. Kaitkan dengan kehidupan: 'Dalam situasi apa kita perlu 'memperlahankan diri' dan berfikir sebelum bertindak?' Ini mengajar tentang kawalan impuls." },
                    { title: "Bot Tanah Liat", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Seketul tanah liat (plastisin)</li><li>Besen berisi air</li><li>Guli atau batu kecil</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Bulatkan tanah liat dan letak dalam air. Ia tenggelam.</li><li>Ambil semula dan bentukkannya seperti mangkuk atau perahu.</li><li>Letak semula di atas air. Sekarang ia terapung!</li><li>Cuba letak guli satu per satu. Berapa banyak bot anda boleh angkut?</li></ol><br><p><b>Kenapa jadi macam tu?</b> Bentuk bot memerangkap udara dan menolak lebih banyak air. Sebab itulah kapal besar yang diperbuat daripada besi boleh terapung!</p>", riasec: "<b>Suka Membina (Realistic)</b>: Kamu suka mengubah bentuk benda dan mengujinya.", mi: "Pandai Guna Tangan, Pandai Logik.", careers: "Arkitek Kapal, Jurutera Marin, Pereka Produk.", panduanKaunselor: "Gunakan sebagai pelajaran tentang 'kebolehan menyesuaikan diri' dan 'berfikir di luar kotak'. Bola tanah liat tenggelam, tetapi dengan mengubah bentuknya, ia boleh terapung. Bincangkan: 'Apabila kamu menghadapi masalah, adakah cara lain untuk melihatnya? Bolehkah kita mengubah 'bentuk' masalah itu?' Ini menggalakkan pemikiran kreatif dalam menyelesaikan masalah." }
                ],
                mathematics: [
                    { title: "Memburu Bentuk", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Kertas dan pensel</li><li>Mata yang tajam!</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Jalan-jalan di dalam rumah atau kelas.</li><li>Cari objek yang berbentuk bulat, segi empat sama, segi tiga, dan segi empat tepat.</li><li>Lukis objek yang anda jumpa dan labelkan bentuknya.</li><li>Siapa dapat cari paling banyak?</li></ol><br><p><b>Kenapa buat macam ni?</b> Matematik ada di mana-mana! Aktiviti ini membantu kita nampak bentuk-bentuk geometri yang ada di sekeliling kita setiap hari.</p>", riasec: "<b>Suka Peraturan (Conventional)</b>: Kamu suka mengkategorikan benda.", mi: "Pandai Lihat Ruang, Pandai Logik.", careers: "Pereka Grafik, Juruukur Tanah, Pereka Bandar.", panduanKaunselor: "Jadikan ini aktiviti 'mencari corak dalam kehidupan'. Bincangkan bagaimana bentuk-bentuk ini ada di mana-mana. Kaitkan dengan rutin harian: 'Apakah 'bentuk' atau corak dalam hari kamu? (Bangun, pergi sekolah, balik rumah). Kenapa rutin itu penting?' Ini membantu murid menghargai struktur dan keteraturan." },
                    { title: "Corak Mozek Kertas", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Kertas warna, gunting, gam</li><li>Kertas lukisan</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Gunting kertas warna menjadi banyak bentuk yang sama, contohnya segi empat sama kecil.</li><li>Ambil kertas lukisan.</li><li>Tampal bentuk-bentuk tadi bersebelahan tanpa ada ruang kosong di antaranya.</li><li>Cipta corak yang cantik dan berulang-ulang.</li></ol><br><p><b>Kenapa buat macam ni?</b> Anda sedang membuat 'teselasi', iaitu corak yang berulang-ulang seperti jubin di lantai bilik air. Ia mengajar tentang corak dan geometri.</p>", riasec: "<b>Suka Seni (Artistic)</b>: Kamu suka menyusun benda menjadi corak yang cantik.", mi: "Pandai Seni, Pandai Lihat Ruang.", careers: "Pereka Tekstil, Artis Mozek, Ahli Matematik.", panduanKaunselor: "Gunakan untuk membincangkan tentang 'keharmonian' dan 'bagaimana bahagian-bahagian kecil membentuk sesuatu yang besar dan cantik'. Kaitkan dengan komuniti sekolah: 'Setiap daripada kamu adalah seperti sekeping mozek. Apabila kita bekerjasama, kita membentuk sebuah sekolah yang hebat.' Ini sesuai untuk aktiviti kaunseling kelompok." },
                    { title: "Carta Gula-gula", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Sebungkus gula-gula berwarna-warni</li><li>Kertas dan pensel warna</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Asingkan gula-gula mengikut warna.</li><li>Kira berapa banyak gula-gula bagi setiap warna.</li><li>Di atas kertas, lukis satu bar untuk setiap warna. Kalau ada 5 gula-gula merah, buat bar setinggi 5 kotak.</li><li>Warnakan bar mengikut warna gula-gula.</li><li>Carta anda sudah siap! Warna apa yang paling banyak?</li></ol><br><p><b>Kenapa buat macam ni?</b> Ini cara mudah untuk menunjukkan data. Anda sedang belajar menjadi seorang penganalisis data, iaitu orang yang pandai membaca maklumat daripada nombor.</p>", riasec: "<b>Suka Susun Atur (Conventional)</b>: Kamu suka mengira dan menyusun maklumat.", mi: "Pandai Logik, Pandai Nombor.", careers: "Penganalisis Penyelidikan Pasaran, Ahli Statistik, Perancang Inventori.", panduanKaunselor: "Gunakan aktiviti ini untuk mengajar tentang 'membuat pilihan berdasarkan data'. Selepas carta siap, tanya: 'Jika kamu seorang pekedai, gula-gula warna apa yang kamu akan beli lebih banyak? Kenapa?' Kaitkan dengan membuat keputusan dalam hidup: 'Bagaimana kita boleh kumpul 'data' atau maklumat sebelum buat keputusan penting?'" },
                    { title: "Seni Simetri", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Kertas, cat air atau pewarna makanan</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Lipat kertas kepada dua bahagian, kemudian buka semula.</li><li>Titiskan beberapa warna cat air di sebelah garisan lipatan sahaja.</li><li>Lipat semula kertas tadi dan tekan perlahan-lahan.</li><li>Buka semula kertas. Lihat! Anda dapat corak yang sama di kedua-dua belah. Cantik!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Ini dipanggil simetri. Macam rama-rama, sayap kiri dan kanannya adalah sama. Badan kita pun simetri juga!</p>", riasec: "<b>Suka Seni (Artistic)</b>: Kamu suka bermain dengan warna dan corak.", mi: "Pandai Seni, Pandai Lihat Ruang.", careers: "Pereka Fesyen, Ahli Biologi (kaji simetri haiwan), Pereka Logo.", panduanKaunselor: "Gunakan untuk meneroka konsep 'keseimbangan'. Bincangkan kenapa simetri nampak cantik dan seimbang. Kaitkan dengan kehidupan: 'Apa yang perlu ada dalam hidup kamu supaya rasa seimbang? (Masa bermain, masa belajar, masa rehat).' Ini membantu memperkenalkan konsep keseimbangan hidup." }
                ]
            },
            intermediate: { 
                science: [
                    { title: "Volkano Meletus!", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Botol plastik kecil</li><li>Tanah liat atau pasir</li><li>Cuka, soda bikarbonat</li><li>Sedikit sabun pinggan dan pewarna merah</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Letak botol di tengah-tengah dulang.</li><li>Bina bentuk gunung di sekeliling botol guna tanah liat atau pasir.</li><li>Masukkan 2 sudu soda bikarbonat, beberapa titis pewarna merah dan sedikit sabun ke dalam botol.</li><li>Tuang cuka ke dalam botol dan... lari! Volkano anda akan meletus dengan lava berbuih!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Apabila cuka (asid) dan soda bikarbonat (alkali) bercampur, ia menghasilkan gas karbon dioksida. Gas inilah yang menolak buih-buih sabun keluar, sama seperti gunung berapi sebenar!</p>", riasec: "<b>Suka Menyiasat (Investigative)</b>: Kamu suka melihat tindak balas yang hebat.", mi: "Pandai Logik, Pandai Alam.", careers: "Ahli Volkanologi, Ahli Geokimia, Pakar Kesan Khas Filem.", panduanKaunselor: "Gunakan sebagai cara untuk membincangkan 'pengurusan emosi', terutamanya kemarahan. Letusan volkano adalah tiba-tiba dan kuat. Bincangkan: 'Apa yang membuatkan kamu rasa macam nak 'meletus'? Apa cara yang lebih baik untuk melepaskan perasaan itu dengan selamat?'" },
                    { title: "Telur Kenyal", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Sebiji telur mentah</li><li>Cuka makan</li><li>Gelas atau balang</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Letakkan telur perlahan-lahan ke dalam gelas.</li><li>Tuang cuka sehingga telur tenggelam sepenuhnya.</li><li>Anda akan nampak buih-buih kecil pada kulit telur.</li><li>Biarkan selama 24-48 jam.</li><li>Keluarkan telur dan basuh perlahan-lahan. Kulitnya sudah hilang! Telur itu kini kenyal macam bola getah. Cuba lambung perlahan-lahan.</li></ol><br><p><b>Kenapa jadi macam tu?</b> Kulit telur diperbuat daripada kalsium karbonat. Cuka adalah asid yang akan melarutkan kulit telur itu, meninggalkan hanya lapisan membran yang lembut di dalam.</p>", riasec: "<b>Suka Menyiasat (Investigative)</b>: Kamu seorang yang sabar dan suka memerhati perubahan.", mi: "Pandai Logik, Pandai Fikir.", careers: "Saintis Bahan, Pembangun Produk Makanan, Pakar Pemakanan.", panduanKaunselor: "Aktiviti ini menunjukkan bagaimana sesuatu yang keras (kulit telur) boleh dilunakkan dan diubah. Gunakan sebagai metafora untuk 'sikap terbuka' dan 'fleksibiliti'. Bincangkan: 'Kadang-kadang kita ada idea yang keras macam kulit telur. Apa akan jadi kalau kita cuba 'lembutkan' fikiran kita dan dengar pendapat orang lain?'" },
                    { title: "Bina Elektromagnet", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Paku besi besar</li><li>Wayar kuprum bertebat (ada salut plastik)</li><li>Bateri saiz D</li><li>Klip kertas</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Lilitkan wayar kuprum di sekeliling paku dengan kemas. Tinggalkan sedikit wayar di kedua-dua hujung.</li><li>Minta orang dewasa kikis sedikit plastik di hujung wayar.</li><li>Sentuhkan satu hujung wayar pada bahagian atas bateri, dan satu lagi pada bahagian bawah. (Awas: Wayar mungkin jadi sedikit panas).</li><li>Dekatkan paku pada klip kertas. Ia dah jadi magnet!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Elektrik yang mengalir melalui wayar menghasilkan medan magnet. Paku besi menjadikan medan magnet itu lebih kuat. Inilah asas motor elektrik!</p>", riasec: "<b>Suka Membina (Realistic)</b>: Kamu suka memasang dan menguji alatan.", mi: "Pandai Guna Tangan, Pandai Logik.", careers: "Jurutera Elektromagnet, Pereka Motor Elektrik, Ahli Fizik Perubatan (MRI).", panduanKaunselor: "Fokus pada konsep 'kuasa tersembunyi'. Elektrik tidak kelihatan, tetapi ia boleh menghasilkan kuasa magnet yang kuat. Kaitkan dengan potensi diri murid: 'Setiap orang ada bakat atau 'kuasa' tersembunyi. Bagaimana cara kita nak 'aktifkan' bakat itu?'" },
                    { title: "Telur Terapung di Tengah", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Telur mentah, 2 gelas tinggi</li><li>Garam, sudu, air</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Isi satu gelas dengan air paip dan masukkan telur. Ia tenggelam.</li><li>Di gelas kedua, larutkan 5-6 sudu garam dalam separuh air.</li><li>Masukkan telur. Ia akan terapung!</li><li>Sekarang, tuang air paip biasa dengan SANGAT PERLAHAN ke dalam gelas air garam.</li><li>Jika anda buat dengan betul, telur itu akan terapung di tengah-tengah air!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Air garam lebih berat (tumpat) daripada air biasa. Dengan menambah air biasa, anda mencipta satu lapisan air yang kurang berat di atas, membolehkan telur terapung di antara dua lapisan itu.</p>", riasec: "<b>Suka Menyiasat (Investigative)</b>: Kamu teliti dan suka melihat hasil yang tepat.", mi: "Pandai Logik, Pandai Fikir.", careers: "Ahli Oseanografi, Jurutera Bawah Air, Pemandu Kapal Selam.", panduanKaunselor: "Ini adalah visualisasi yang hebat untuk konsep 'mencari keseimbangan'. Telur itu tidak tenggelam dan tidak terapung sepenuhnya. Bincangkan tentang mencari keseimbangan dalam hidup, contohnya antara kerja sekolah dan bermain, atau antara masa dengan kawan dan keluarga." }
                ],
                technology: [
                    { title: "Animasi Stop-Motion", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Telefon pintar atau tablet</li><li>Aplikasi percuma 'Stop Motion Studio'</li><li>Patung mainan atau tanah liat</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Buka aplikasi dan mulakan projek baru.</li><li>Letak mainan anda dan ambil gambar pertama.</li><li>Gerakkan mainan itu SIKIT sahaja.</li><li>Ambil gambar kedua.</li><li>Ulang langkah 2 & 3 banyak kali.</li><li>Tekan butang 'play'. Lihat! Mainan anda bergerak sendiri!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Otak kita menyambungkan gambar-gambar yang pantas bertukar menjadi satu pergerakan. Inilah cara filem kartun dan animasi dibuat!</p>", riasec: "<b>Suka Seni (Artistic)</b>: Kamu suka bercerita melalui gambar.", mi: "Pandai Seni, Pandai Lihat Ruang.", careers: "Animator, Pengarah Filem, Pereka Grafik Gerakan.", panduanKaunselor: "Mengajar asas animasi dan kepentingan kesabaran. Setiap pergerakan kecil adalah penting. Kaitkan proses ini dengan usaha mencapai cita-cita: 'Untuk mencapai sesuatu yang besar (animasi yang lancar), kita perlu lakukan banyak langkah kecil dengan sabar'." },
                    { title: "Buat E-Kad Ucapan", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Komputer atau tablet dengan internet</li><li>Laman web reka bentuk percuma seperti Canva</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Layari canva.com dan daftar akaun percuma (minta bantuan ibu bapa).</li><li>Cari templat 'Kad Ucapan'.</li><li>Pilih satu reka bentuk yang anda suka.</li><li>Tukar perkataan, warna, dan gambar. Tambah gambar anda sendiri!</li><li>Anda boleh tambah pelekat (sticker) yang comel dan bergerak.</li><li>Simpan dan hantar kepada kawan-kawan melalui emel atau WhatsApp.</li></ol><br><p><b>Kenapa buat macam ni?</b> Anda sedang belajar asas reka bentuk grafik. Ini adalah kemahiran penting untuk membuat poster, pembentangan, dan kandungan media sosial yang cantik.</p>", riasec: "<b>Suka Seni (Artistic)</b>: Kamu suka mereka cipta sesuatu yang cantik di komputer.", mi: "Pandai Seni, Pandai Lihat Ruang.", careers: "Pereka Grafik, Pakar Media Sosial, Pereka UI/UX.", panduanKaunselor: "Memperkenalkan alat reka bentuk digital yang sangat berguna. Gunakan ini untuk sesi tentang ekspresi diri: 'Bagaimana kamu boleh gunakan warna dan gambar untuk menunjukkan perasaan kamu dalam kad ini?'" },
                    { title: "Rakam Cerita Audio", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Telefon pintar yang ada aplikasi 'Voice Recorder'</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Fikirkan satu cerita pendek yang ringkas.</li><li>Berlatih membaca cerita itu dengan suara yang berbeza untuk setiap watak.</li><li>Fikirkan kesan bunyi yang anda boleh buat sendiri. Contoh: ketuk meja untuk bunyi pintu, tiup untuk bunyi angin.</li><li>Tekan butang rakam dan mulakan penceritaan anda! Jangan lupa masukkan kesan bunyi.</li><li>Dengar semula hasil rakaman anda. Seronok kan?</li></ol><br><p><b>Kenapa buat macam ni?</b> Anda sedang belajar menjadi seorang jurutera audio atau penerbit 'podcast'. Mereka menggunakan suara dan bunyi untuk bercerita.</p>", riasec: "<b>Suka Seni (Artistic)</b>: Kamu suka berlakon dengan suara dan bunyi.", mi: "Pandai Muzik, Pandai Bahasa.", careers: "Penerbit Radio, 'Podcaster', Pelakon Suara, Pereka Bunyi (Sound Designer).", panduanKaunselor: "Aktiviti ini mengasah kemahiran bercerita dan keyakinan diri. Selepas rakaman, bincangkan: 'Apa perasaan kamu bila dengar suara sendiri? Apa yang kamu suka tentang cerita kamu?' Ini membina penerimaan kendiri." },
                    { title: "Bina Kod QR Sendiri", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Komputer atau telefon pintar dengan internet</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Cari 'QR code generator' di Google. Pilih salah satu laman web percuma.</li><li>Pilih jenis maklumat yang ingin anda kongsi (cth: Teks).</li><li>Taip satu mesej rahsia untuk kawan anda.</li><li>Klik butang 'Generate'. Satu gambar kod QR akan muncul.</li><li>Simpan gambar itu.</li><li>Minta kawan anda imbas kod itu guna kamera telefon. Adakah dia dapat mesej rahsia anda?</li></ol><br><p><b>Kenapa jadi macam tu?</b> Kod QR menyimpan maklumat dalam bentuk corak hitam putih. Telefon kita pandai membaca corak ini dan menukarkannya semula kepada teks. Ia cara pantas untuk berkongsi maklumat!</p>", riasec: "<b>Suka Peraturan (Conventional)</b>: Kamu suka cara yang cekap untuk berkongsi maklumat.", mi: "Pandai Logik, Pandai Lihat Ruang.", careers: "Pakar Pemasaran Digital, Pembangun Aplikasi Mudah Alih, Jurutera Logistik.", panduanKaunselor: "Menunjukkan bagaimana maklumat digital boleh dihubungkan dengan dunia fizikal. Gunakan ini untuk membincangkan keselamatan dalam talian: 'Maklumat apa yang selamat untuk dikongsi dalam kod QR? Maklumat apa yang tidak?'" }
                ],
                engineering: [
                    { title: "Menara Mi Sepaghetti", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>20 batang mi spaghetti</li><li>Satu biji marshmallow</li><li>1 meter pita pelekat</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Bina sebuah menara paling tinggi yang boleh berdiri sendiri guna bahan yang diberi.</li><li>Peraturan: Marshmallow mesti berada di puncak sekali!</li><li>Tips: Bentuk segi tiga adalah sangat kuat. Cuba buat tapak yang stabil.</li><li>Ukur ketinggian menara anda. Cabar kawan-kawan!</li></ol><br><p><b>Kenapa buat macam ni?</b> Ini adalah cabaran kejuruteraan sebenar! Jurutera perlu membina struktur yang tinggi dan kuat dengan bahan yang terhad. Anda sedang belajar menjadi seorang jurutera sivil.</p>", riasec: "<b>Suka Membina (Realistic)</b>: Kamu suka cabaran dan mereka cipta.", mi: "Pandai Guna Tangan, Pandai Bergaul.", careers: "Jurutera Sivil, Arkitek, Pengurus Projek Pembinaan.", panduanKaunselor: "Cabaran klasik yang mengajar tentang perancangan, kerjasama, dan daya tahan apabila menara runtuh. Bincangkan: 'Apa yang kamu pelajari bila menara kamu jatuh? Bagaimana kumpulan kamu bekerjasama untuk membaikinya?'" },
                    { title: "Tangan Robotik Kadbod", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Kadbod tebal, penyedut minuman (straw)</li><li>Benang atau tali, gunting, pita pelekat</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Lukis bentuk tangan anda di atas kadbod dan gunting.</li><li>Lipat setiap sendi jari.</li><li>Potong straw menjadi kepingan kecil dan lekatkan pada setiap ruas jari.</li><li>Masukkan seutas benang melalui semua straw pada satu jari. Ikat hujungnya di hujung jari.</li><li>Ulang untuk semua jari.</li><li>Tarik benang-benang di bahagian bawah. Jari-jari robotik akan bergerak!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Benang itu berfungsi seperti tendon di dalam jari kita. Apabila ditarik, ia membuatkan jari membengkok. Ini adalah asas kepada robotik dan prostetik (tangan palsu).</p>", riasec: "<b>Suka Membina (Realistic)</b>: Kamu suka meniru cara benda hidup berfungsi.", mi: "Pandai Guna Tangan, Pandai Fikir.", careers: "Jurutera Robotik, Pakar Prostetik, Pereka Animasi (animatronics).", panduanKaunselor: "Satu cara yang hebat untuk belajar tentang anatomi dan kejuruteraan. Gunakan ini untuk meneroka tema empati: 'Bagaimana ciptaan seperti ini boleh membantu orang yang kehilangan tangan?'" },
                    { title: "Kereta Belon", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Kotak kecil atau botol plastik</li><li>4 penutup botol, 2 lidi sate, 2 straw</li><li>Belon, pita pelekat</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Buat roda dengan memasukkan lidi melalui straw yang dilekat di bawah kotak. Pasang penutup botol sebagai roda.</li><li>Tebuk satu lubang di atas kotak.</li><li>Masukkan hujung belon melalui lubang dan lekatkan straw pada muncung belon itu.</li><li>Tiup belon melalui straw. Tahan angin dengan jari.</li><li>Letak di atas lantai dan lepaskan. Kereta anda akan bergerak!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Udara yang keluar dari belon menolak kereta ke hadapan. Ini dipanggil tujahan (thrust). Prinsip yang sama digunakan oleh jet dan roket!</p>", riasec: "<b>Suka Membina (Realistic)</b>: Kamu suka membuat kenderaan sendiri.", mi: "Pandai Guna Tangan, Pandai Lihat Ruang.", careers: "Jurutera Automotif, Pereka Mainan, Jurutera Pendorongan (Propulsion).", panduanKaunselor: "Mengajar tentang penukaran tenaga. Cabar murid untuk menambah baik rekaan mereka. Ini mengajar proses reka bentuk berulang (iterative design): 'Bagaimana kita boleh buat kereta ini bergerak lebih laju atau lebih lurus? Jom cuba baiki!'" },
                    { title: "Kincir Angin Warna-Warni", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Kertas tebal, pin tekan</li><li>Pensel yang ada pemadam di hujungnya</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Lukis 'X' pada kertas segi empat sama.</li><li>Gunting di sepanjang garisan, tapi jangan sampai ke tengah.</li><li>Lipat setiap bucu selang-seli ke tengah.</li><li>Cucuk pin menembusi semua lapisan di tengah dan cucuk pada pemadam di hujung pensel.</li><li>Pastikan ia boleh berputar. Tiup atau bawa keluar.</li></ol><br><p><b>Kenapa jadi macam tu?</b> Angin menolak bilah kincir dan membuatnya berputar. Kincir angin besar digunakan untuk menghasilkan elektrik daripada kuasa angin!</p>", riasec: "<b>Suka Seni (Artistic)</b>: Kamu suka membuat benda yang cantik dan berfungsi.", mi: "Pandai Guna Tangan, Pandai Alam.", careers: "Jurutera Tenaga Boleh Baharu, Pereka Turbin Angin, Ahli Meteorologi.", panduanKaunselor: "Aktiviti klasik yang mengajar tentang tenaga angin. Gunakan sebagai pemula perbincangan tentang alam sekitar dan tenaga bersih: 'Selain angin, apa lagi sumber tenaga bersih yang ada?'" }
                ],
                mathematics: [
                    { title: "Kod Rahsia Pengganti", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Kertas dan pensel</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Ini kod rahsia mudah: A=1, B=2, C=3, dan seterusnya.</li><li>Tulis satu mesej rahsia menggunakan nombor. Contoh: 'SAYA' menjadi '19-1-25-1'.</li><li>Beri mesej berkod itu kepada kawan. Beri juga kunci kod (A=1, B=2...).</li><li>Bolehkah kawan anda selesaikannya?</li><li>Cuba cipta kod anda sendiri! Contoh: A=Z, B=Y...</li></ol><br><p><b>Kenapa buat macam ni?</b> Anda sedang belajar Kriptografi, iaitu sains membuat dan memecahkan kod. Ia menggunakan logik matematik untuk melindungi maklumat.</p>", riasec: "<b>Suka Menyiasat (Investigative)</b>: Kamu suka menyelesaikan teka-teki dan kod rahsia.", mi: "Pandai Logik, Pandai Nombor.", careers: "Pakar Keselamatan Siber, Pengaturcara Komputer, Penganalisis Risikan.", panduanKaunselor: "Memperkenalkan pemikiran logik dan algoritma. Bincangkan tentang kepentingan komunikasi yang jelas: 'Apa jadi kalau kunci kod kamu tidak jelas? Adakah kawan kamu boleh faham?' Ini mengajar tentang kepentingan memberi arahan yang tepat." },
                    { title: "Ukur Pi (π) Guna Benang", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Objek bulat (cth: piring, tin, penutup botol)</li><li>Benang, pembaris, kalkulator</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Ambil satu objek bulat. Lilit benang di sekelilingnya (ukur lilitan). Ukur panjang benang itu dengan pembaris.</li><li>Kemudian, ukur jarak lurus merentasi tengah bulatan (diameter).</li><li>Bahagikan (lilitan ÷ diameter). Catat jawapannya.</li><li>Ulang dengan objek bulat lain.</li><li>Anda akan dapati jawapannya sentiasa lebih kurang 3.14. Itulah nombor Pi!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Pi ialah satu nombor istimewa dalam matematik yang menghubungkan lilitan dan diameter semua bulatan di dunia, tak kira besar atau kecil.</p>", riasec: "<b>Suka Menyiasat (Investigative)</b>: Kamu suka membuat ukuran dan mencari corak.", mi: "Pandai Nombor, Pandai Lihat Ruang.", careers: "Ahli Matematik, Jurutera Mekanikal, Ahli Fizik.", panduanKaunselor: "Eksperimen hebat yang membuktikan satu konsep matematik penting melalui pengukuran dunia sebenar. Gunakan ini untuk membincangkan tentang 'pemalar' dalam hidup: 'Seperti Pi yang sentiasa sama, apakah nilai-nilai murni (cth: jujur, baik hati) yang sentiasa penting dalam diri kita?'" },
                    { title: "Belanjawan Kedai Mainan", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Katalog mainan (dari surat khabar atau internet)</li><li>Kertas dan pensel</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Bayangkan anda diberi RM100 untuk membeli-belah.</li><li>Lihat katalog mainan dan pilih barang yang anda mahu beli.</li><li>Tulis nama mainan dan harganya.</li><li>Jumlahkan harga semua mainan. Adakah ia lebih atau kurang daripada RM100?</li><li>Kira berapa baki duit anda. Cuba dapatkan baki yang paling sedikit!</li></ol><br><p><b>Kenapa buat macam ni?</b> Ini adalah latihan matematik dalam kehidupan sebenar! Anda belajar menguruskan wang, membuat anggaran, dan mengira jumlah dengan pantas.</p>", riasec: "<b>Suka Peraturan (Conventional)</b>: Kamu suka merancang dan mengira.", mi: "Pandai Nombor, Pandai Fikir.", careers: "Penganalisis Kewangan, Usahawan, Perancang Bandar.", panduanKaunselor: "Mengajar kemahiran kewangan asas dengan cara yang relevan. Gunakan ini untuk sesi penetapan matlamat: 'Jika RM100 ini adalah 'masa' kamu dalam sehari, bagaimana kamu akan 'belanjakannya' antara belajar, bermain, dan berehat?'" },
                    { title: "Seni Koordinat", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Kertas graf, pensel</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Lukis paksi-x (melintang) dan paksi-y (menegak) pada kertas graf. Labelkan nombor.</li><li>Ikut senarai koordinat ini dan tandakan titik: (1,1), (5,1), (5,4), (3,6), (1,4), (1,1).</li><li>Sambungkan titik-titik mengikut urutan. Apakah bentuk yang anda dapat? (Sebuah rumah!)</li><li>Cuba cipta gambar anda sendiri dan tulis senarai koordinat untuk kawan anda teka.</li></ol><br><p><b>Kenapa buat macam ni?</b> Anda sedang belajar menggunakan graf koordinat, yang sangat penting dalam mereka bentuk permainan video, peta GPS, dan banyak lagi!</p>", riasec: "<b>Suka Peraturan (Conventional)</b>: Kamu teliti dan suka mengikut arahan.", mi: "Pandai Lihat Ruang, Pandai Nombor.", careers: "Pereka Permainan Video, Juruukur Tanah, Animator Komputer.", panduanKaunselor: "Cara yang menyeronokkan untuk memperkenalkan graf koordinat. Gunakan sebagai alat untuk membincangkan 'perancangan' dan 'mengikut arahan': 'Apa yang berlaku jika kamu tersilap satu titik? Penting tak untuk ikut arahan dengan betul untuk mencapai hasil yang diinginkan?'" }
                ]
            },
            senior: {
                science: [
                    { title: "Bina Oven Solar", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Kotak piza atau kotak kasut</li><li>Kerajang aluminium (aluminium foil), plastik pembalut (cling wrap)</li><li>Kertas hitam, pita pelekat, gunting</li><li>Biskut dan coklat keping</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Alaskan bahagian dalam kotak dengan kerajang aluminium.</li><li>Letakkan sekeping kertas hitam di dasarnya.</li><li>Minta orang dewasa potong 'tingkap' pada penutup kotak. Jangan potong habis, biarkan satu sisi bercantum.</li><li>Tampal kerajang aluminium pada bahagian dalam 'tingkap' itu.</li><li>Tutup lubang tingkap dengan plastik pembalut.</li><li>Letak biskut dan coklat di atas kertas hitam, tutup kotak, dan halakan ke arah matahari. Tunggu dan lihat coklat cair!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Kerajang aluminium memantulkan cahaya matahari ke dalam kotak. Warna hitam menyerap haba, dan plastik memerangkap haba itu. Anda telah membina sebuah oven solar!</p>", riasec: "<b>Suka Mereka Cipta (Realistic)</b>: Kamu suka membina sesuatu yang berguna.", mi: "Pandai Alam, Pandai Guna Tangan.", careers: "Jurutera Tenaga Boleh Baharu, Saintis Alam Sekitar, Pereka Produk Lestari.", panduanKaunselor: "Gunakan sebagai pemula perbualan tentang 'masa depan' dan 'kelestarian'. Bincangkan isu perubahan iklim pada tahap yang mudah difahami. Kaitkan dengan peranan murid: 'Apakah satu 'langkah kecil' yang boleh kamu buat hari ini untuk menjaga bumi kita, sama seperti oven ini menggunakan kuasa matahari yang bersih?'" },
                    { title: "Ekstrak DNA Strawberi", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Sebiji strawberi, beg plastik kedap udara</li><li>Sabun pencuci pinggan, garam</li><li>Alkohol gosok (simpan dalam peti sejuk)</li><li>Penapis kopi, cawan</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Masukkan strawberi dalam beg plastik, tutup dan lenyekkan sehingga hancur.</li><li>Dalam cawan lain, campurkan 2 sudu teh sabun, 1 sudu teh garam dan 1/2 cawan air.</li><li>Masukkan 2 sudu teh campuran sabun ini ke dalam beg strawberi, gaul perlahan.</li><li>Tapis campuran strawberi ke dalam cawan yang bersih.</li><li>Tuang alkohol sejuk perlahan-lahan di tepi cawan. Jangan kacau!</li><li>Lihat! Benang-benang putih akan terapung. Itulah DNA strawberi!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Sabun memecahkan dinding sel strawberi, dan garam membantu DNA berkumpul. DNA tidak larut dalam alkohol sejuk, jadi ia muncul sebagai gumpalan yang boleh kita lihat.</p>", riasec: "<b>Suka Menyiasat (Investigative)</b>: Kamu teliti dan suka melihat perkara yang tersembunyi.", mi: "Pandai Logik, Pandai Alam.", careers: "Ahli Genetik, Saintis Forensik, Juruteknik Makmal Perubatan.", panduanKaunselor: "Gunakan aktiviti ini untuk membincangkan tentang 'keunikan'. Terangkan bahawa DNA ialah 'kod arahan' yang menjadikan setiap hidupan unik. Tanya murid: 'Apakah 'kod' atau sifat unik yang ada pada diri kamu yang membuatkan kamu istimewa?'" },
                    { title: "Kromatografi Daun", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Beberapa helai daun hijau (pilih yang lembut)</li><li>Alkohol gosok</li><li>Kertas penapis kopi, gelas kecil</li><li>Sudu atau kayu</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Koyakkan daun menjadi kepingan kecil dan masukkan ke dalam gelas.</li><li>Tumbuk daun dengan sudu untuk melumatkannya.</li><li>Tuang alkohol sekadar menutupi daun. Teruskan menumbuk.</li><li>Potong kertas penapis menjadi jalur panjang.</li><li>Letakkan satu hujung kertas ke dalam alkohol, dan gantungkan bahagian atasnya di bibir gelas.</li><li>Tunggu 15-20 minit. Lihat warna-warna berbeza (hijau, kuning, oren) yang terpisah pada kertas!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Daun bukan sahaja ada warna hijau (klorofil). Ia ada warna lain yang tersembunyi. Alkohol membawa warna-warna ini naik ke atas kertas pada kelajuan berbeza, lalu memisahkannya.</p>", riasec: "<b>Suka Menyiasat (Investigative)</b>: Kamu suka memisahkan benda dan melihat komponennya.", mi: "Pandai Alam, Pandai Logik.", careers: "Ahli Biokimia, Saintis Tumbuhan, Pakar Seni Lukis (analisis cat lama).", panduanKaunselor: "Aktiviti ini ialah metafora untuk 'melihat lebih mendalam'. Sesuatu yang nampak ringkas (daun hijau) sebenarnya kompleks. Bincangkan: 'Kadang-kadang, seorang kawan nampak marah di luar, tetapi mungkin ada perasaan lain yang tersembunyi di dalam. Kenapa penting untuk kita faham kawan kita dengan lebih mendalam?'" },
                    { title: "Kanta Pembesar Air", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Pembalut plastik (cling wrap), gelang getah</li><li>Balang kaca mulut lebar (cth: balang jem)</li><li>Air, penitis air (dropper)</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Letakkan pembalut plastik di atas mulut balang. Pastikan ia tegang.</li><li>Gunakan gelang getah untuk mengikat pembalut plastik dengan ketat.</li><li>Tekan bahagian tengah plastik ke bawah sedikit untuk membuat lekukan kecil.</li><li>Letakkan sekeping kertas dengan tulisan kecil di dalam balang.</li><li>Gunakan penitis untuk meletakkan beberapa titis air ke dalam lekukan plastik tadi.</li><li>Lihat tulisan melalui titisan air. Ia nampak lebih besar!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Bentuk melengkung titisan air membengkokkan cahaya, sama seperti kanta pembesar sebenar. Ini dipanggil pembiasan cahaya.</p>", riasec: "<b>Suka Menyiasat (Investigative)</b>: Kamu suka mengubah cara kamu melihat sesuatu.", mi: "Pandai Lihat Ruang, Pandai Logik.", careers: "Pakar Optik, Jurugambar, Pereka Mikroskop.", panduanKaunselor: "Gunakan untuk membincangkan 'perspektif'. Kanta air ini mengubah cara kita melihat tulisan. Tanya murid: 'Bagaimana kita boleh melihat satu masalah dari 'kanta' atau sudut pandangan yang berbeza? Adakah ia akan kelihatan berbeza?' Ini mengajar kemahiran menyelesaikan masalah." }
                ],
                technology: [
                    { title: "Asas Pengekodan Blok", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Komputer atau tablet dengan internet</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Layari laman web <a href='https://studio.code.org/s/mc/lessons/1/levels/1' target='_blank' class='text-cyan-400 hover:underline'>Hour of Code: Minecraft</a>.</li><li>Tonton video pengenalan ringkas.</li><li>Ikut arahan di skrin. Anda hanya perlu seret dan cantumkan blok-blok kod untuk menggerakkan watak anda.</li><li>Cuba selesaikan seberapa banyak peringkat yang anda boleh.</li><li>Setiap blok adalah satu arahan kepada komputer. Mudah kan?</li></ol><br><p><b>Kenapa buat macam ni?</b> Anda sedang belajar asas pengaturcaraan komputer! Pengekodan blok adalah cara yang menyeronokkan untuk belajar berfikir seperti seorang pengaturcara tanpa perlu menaip kod yang rumit. Ini adalah langkah pertama untuk mencipta permainan atau aplikasi anda sendiri.</p>", riasec: "<b>Suka Menyiasat (Investigative)</b>: Kamu suka menyelesaikan masalah langkah demi langkah.", mi: "Pandai Logik, Pandai Fikir.", careers: "Pembangun Perisian, Jurutera Permainan Video, Saintis Data.", panduanKaunselor: "Fokus pada 'pemikiran logik' dan 'memecahkan masalah besar kepada langkah kecil'. Tunjukkan bagaimana setiap blok kod adalah satu arahan kecil. Kaitkan dengan matlamat besar: 'Kalau cita-cita kamu nak jadi doktor, apakah 'blok-blok' atau langkah-langkah kecil yang perlu kamu ambil sekarang?'" },
                    { title: "Fotografi Makro Telefon", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Telefon pintar</li><li>Penitis air (dropper)</li><li>Objek kecil menarik (daun, serangga, fabrik)</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Bersihkan kanta kamera telefon anda.</li><li>Dengan sangat berhati-hati, gunakan penitis untuk meletakkan SATU titisan air kecil betul-betul di atas kanta kamera. Tegangan permukaan akan membuatkannya berbentuk kubah.</li><li>Terbalikkan telefon dengan perlahan. Titisan air tidak akan jatuh.</li><li>Dekatkan kamera telefon (dengan titisan air) sangat rapat dengan objek yang ingin anda ambil gambar.</li><li>Fokus dan tangkap gambar. Anda akan dapat melihat butiran yang sangat halus!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Titisan air bertindak sebagai kanta makro tambahan, membolehkan kamera telefon anda fokus pada jarak yang sangat dekat. Ia adalah satu 'godam' teknologi yang hebat!</p>", riasec: "<b>Suka Seni (Artistic) & Menyiasat (Investigative)</b>: Kamu suka mencari kecantikan dalam butiran kecil.", mi: "Pandai Lihat Ruang, Pandai Alam.", careers: "Jurugambar Alam Semula Jadi, Juruteknik Makmal, Pemeriksa Kawalan Kualiti.", panduanKaunselor: "Gunakan aktiviti ini untuk mengajar tentang 'menghargai perkara-perkara kecil'. Selepas melihat objek di bawah kanta makro, bincangkan: 'Apakah perkara-perkara kecil dalam hidup kamu yang sering kamu terlepas pandang, tetapi sebenarnya sangat istimewa?'" },
                    { title: "Cipta Pen Stylus", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Sebatang pen (yang dakwatnya sudah habis)</li><li>Kerajang aluminium (aluminium foil)</li><li>Pita pelekat, gunting</li><li>Putik kapas (cotton bud)</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Keluarkan tiub dakwat dari pen.</li><li>Potong kepala putik kapas dan masukkan ke dalam hujung pen.</li><li>Balut bahagian bawah pen (termasuk sedikit bahagian putik kapas) dengan kerajang aluminium. Gunakan pita pelekat untuk melekatkannya.</li><li>Pastikan ada bahagian aluminium yang boleh disentuh oleh jari anda semasa memegangnya.</li><li>Lembapkan hujung putik kapas dengan sedikit air (jangan terlalu basah).</li><li>Cuba gunakan pada skrin sentuh telefon atau tablet. Ia berfungsi!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Skrin sentuh berfungsi dengan mengesan cas elektrik dari jari kita. Aluminium dan air boleh mengalirkan elektrik (konduktif), jadi ia meniru sentuhan jari anda.</p>", riasec: "<b>Suka Membina (Realistic)</b>: Kamu suka mencipta alatan sendiri dari bahan terbuang.", mi: "Pandai Guna Tangan, Pandai Logik.", careers: "Jurutera Perkakasan (Hardware), Pereka Produk, Juruteknik Pembaikan.", panduanKaunselor: "Ini adalah pelajaran tentang 'menggunakan sumber yang ada' (resourcefulness). Bincangkan: 'Kita telah mencipta sesuatu yang berguna dari bahan terbuang. Dalam hidup, bagaimana kita boleh menggunakan 'sumber' atau kemahiran yang kita ada untuk menyelesaikan masalah?'" },
                    { title: "Reka Laman Web Mudah", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Komputer dengan akaun Google</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Layari <a href='https://sites.google.com' target='_blank' class='text-cyan-400 hover:underline'>Google Sites</a> dan mulakan laman web baharu.</li><li>Beri tajuk kepada laman web anda, contohnya 'Semua Tentang Saya'.</li><li>Gunakan panel di sebelah kanan untuk menambah kotak teks. Tulis tentang hobi anda.</li><li>Cuba masukkan gambar diri anda atau gambar hobi anda.</li><li>Terokai pilihan 'Themes' untuk menukar warna dan rupa laman web anda.</li><li>Apabila siap, klik 'Publish' (minta bantuan ibu bapa) untuk kongsikannya dengan keluarga!</li></ol><br><p><b>Kenapa buat macam ni?</b> Anda sedang belajar asas reka bentuk web dan cara menyusun maklumat secara digital. Ini adalah kemahiran penting untuk berkomunikasi dan berkongsi idea dengan dunia.</p>", riasec: "<b>Suka Seni (Artistic) & Peraturan (Conventional)</b>: Kamu suka menyusun maklumat dengan cara yang kreatif.", mi: "Pandai Bahasa, Pandai Lihat Ruang.", careers: "Pereka Web, Pembangun Web, Penulis Kandungan Digital.", panduanKaunselor: "Gunakan sebagai platform untuk 'pembinaan identiti' dan 'ekspresi diri'. Laman web ini adalah tentang diri mereka. Bincangkan: 'Apakah tiga perkara paling penting yang kamu mahu orang lain tahu tentang kamu? Bagaimana kamu boleh menunjukkannya melalui laman web kamu?'" }
                ],
                engineering: [
                    { title: "Cabaran Mendaratkan Telur", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Sebiji telur mentah</li><li>Bahan terbuang: straw, surat khabar, beg plastik, kapas, gelang getah, kotak kecil.</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li><b>Misi anda:</b> Cipta satu alat pelindung untuk telur supaya ia tidak pecah apabila dijatuhkan dari tempat tinggi (cth: dari atas kerusi).</li><li>Gunakan bahan-bahan yang diberi untuk mereka cipta alat anda. Fikirkan: perlukah payung terjun? Perlukah kusyen yang lembut?</li><li>Letakkan telur di dalam ciptaan anda.</li><li>Dengan bantuan orang dewasa, jatuhkan dari tempat yang selamat.</li><li>Adakah telur anda selamat? Jika pecah, fikirkan cara untuk baiki rekaan anda!</li></ol><br><p><b>Kenapa buat macam ni?</b> Ini adalah cabaran reka bentuk kejuruteraan. Jurutera perlu mereka cipta solusi untuk melindungi benda-benda rapuh, sama seperti jurutera NASA mereka cipta kapal angkasa untuk mendarat dengan selamat di planet Marikh.</p>", riasec: "<b>Suka Mereka Cipta (Realistic)</b>: Kamu suka mereka bentuk, membina, dan menguji.", mi: "Pandai Guna Tangan, Pandai Lihat Ruang.", careers: "Jurutera Aeroangkasa (NASA), Pereka Pembungkusan, Pakar Ujian Keselamatan Kenderaan.", panduanKaunselor: "Ini adalah pelajaran utama tentang 'perancangan untuk kegagalan' dan 'daya tahan (resilience)'. Kemungkinan besar telur akan pecah pada percubaan pertama. Bincangkan: 'Adakah salah untuk gagal? Apa yang kita belajar bila kita gagal? Bagaimana kita boleh baiki rekaan kita?' Ini mengajar bahawa kegagalan adalah sebahagian daripada proses kejayaan." },
                    { title: "Kren Hidraulik Picagari", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>2 picagari (syringe) tanpa jarum</li><li>Tiub plastik lutsinar yang muat pada hujung picagari</li><li>Air berwarna, kadbod, lidi sate</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Isi satu picagari dengan air berwarna. Sambungkan kedua-dua picagari dengan tiub. Pastikan tiada gelembung udara.</li><li>Tolak picagari pertama, dan lihat picagari kedua tertolak keluar. Ini sistem hidraulik anda!</li><li>Gunakan kadbod, lidi sate dan gam untuk membina 'lengan' kren.</li><li>Pasangkan sistem hidraulik anda pada lengan kren supaya apabila anda menolak satu picagari, lengan kren itu akan terangkat.</li><li>Cuba angkat objek kecil seperti pemadam.</li></ol><br><p><b>Kenapa jadi macam tu?</b> Air tidak boleh dimampatkan. Apabila anda menolak air di satu hujung, ia memindahkan daya itu ke hujung yang lain. Inilah cara jengkaut dan brek kereta berfungsi!</p>", riasec: "<b>Suka Membina (Realistic)</b>: Kamu suka sistem mekanikal dan melihat bagaimana daya berfungsi.", mi: "Pandai Guna Tangan, Pandai Logik.", careers: "Jurutera Mekanikal, Operator Jentera Berat, Pereka Robot Industri.", panduanKaunselor: "Fokus pada tema 'pengaruh' dan 'tindakan-reaksi'. Tindakan kecil (menolak picagari kecil) boleh menghasilkan pergerakan besar (lengan terangkat). Bincangkan: 'Apakah 'tindakan kecil' yang baik yang boleh kamu lakukan hari ini yang boleh membawa 'reaksi' atau hasil yang besar dan positif?'" },
                    { title: "Kereta Getah", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Botol plastik, 4 penutup botol</li><li>2 lidi sate, 2 straw, gelang getah</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Buat gandar (axle) dengan menebuk lubang di tengah penutup botol dan masukkan lidi sate.</li><li>Lekatkan straw pada botol dan masukkan gandar lidi melaluinya. Kereta anda kini ada roda.</li><li>Tebuk lubang kecil di bawah botol.</li><li>Ikat beberapa gelang getah menjadi satu rantai. Cangkukkan satu hujung pada gandar belakang.</li><li>Tarik hujung satu lagi melalui lubang di bawah botol dan cangkukkan pada sebatang lidi pendek di atas botol.</li><li>Putar roda belakang untuk memintal getah. Letak di lantai dan lepaskan!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Apabila anda memintal getah, anda menyimpan tenaga (tenaga keupayaan). Apabila dilepaskan, tenaga itu bertukar menjadi tenaga pergerakan (tenaga kinetik) yang memutarkan roda.</p>", riasec: "<b>Suka Membina (Realistic)</b>: Kamu suka bermain dengan tenaga dan pergerakan.", mi: "Pandai Guna Badan, Pandai Logik.", careers: "Jurutera Automotif, Pereka Mainan, Ahli Fizik.", panduanKaunselor: "Gunakan untuk meneroka konsep 'tenaga' dan 'motivasi'. Getah yang dipintal menyimpan tenaga. Bincangkan: 'Apakah perkara yang memberi kamu 'tenaga' atau semangat? (cth: pujian, rehat yang cukup, melakukan hobi). Bagaimana kamu boleh 'menyimpan' tenaga itu untuk digunakan semasa kamu rasa letih?'" },
                    { title: "Menara Tahan Gempa", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>20 biji marshmallow, 30 batang pencungkil gigi</li><li>Dulang berisi jeli atau agar-agar (sebagai 'tanah' bergegar)</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Gunakan marshmallow sebagai penyambung dan pencungkil gigi sebagai galang (beam) untuk membina menara paling tinggi yang anda boleh.</li><li>Fikirkan tentang tapaknya. Adakah tapak yang lebar lebih stabil? Adakah bentuk segi tiga membantu?</li><li>Letakkan menara anda di atas jeli.</li><li>Goyangkan dulang perlahan-lahan, kemudian semakin kuat untuk mensimulasikan gempa bumi.</li><li>Adakah menara anda runtuh? Bagaimana anda boleh membinanya semula supaya lebih kukuh?</li></ol><br><p><b>Kenapa jadi macam tu?</b> Jurutera struktur mereka bentuk bangunan dengan tapak yang fleksibel dan struktur yang kuat (seperti banyak segi tiga) untuk menahan gegaran gempa bumi. Jeli meniru pergerakan tanah yang tidak stabil.</p>", riasec: "<b>Suka Mereka Cipta (Realistic)</b>: Kamu suka membina struktur yang kuat dan stabil.", mi: "Pandai Lihat Ruang, Pandai Logik.", careers: "Jurutera Gempa Bumi, Arkitek, Perancang Bandar (di kawasan berisiko).", panduanKaunselor: "Ini adalah pelajaran yang sangat baik tentang 'menghadapi cabaran' dan 'kestabilan'. Bincangkan: 'Apakah yang membuatkan menara ini stabil? Apa pula yang membuatkan kamu rasa 'stabil' dan selamat apabila menghadapi cabaran di sekolah?' Ini membuka perbincangan tentang sistem sokongan dan kekuatan peribadi." }
                ],
                mathematics: [
                    { title: "Uji Kebarangkalian Dadu", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Sebiji dadu</li><li>Kertas dan pensel</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Secara teori, setiap nombor pada dadu (1-6) mempunyai peluang yang sama untuk keluar.</li><li>Jom uji! Lontar dadu sebanyak 30 kali.</li><li>Buat jadual dan catatkan setiap nombor yang keluar menggunakan tanda gundal (tally marks).</li><li>Selepas 30 lontaran, nombor manakah yang paling kerap keluar? Adakah setiap nombor keluar lebih kurang 5 kali (30 ÷ 6)?</li><li>Jika tidak, kenapa agaknya? Cuba lontar 30 kali lagi. Adakah hasilnya lebih seimbang?</li></ol><br><p><b>Kenapa buat macam ni?</b> Anda sedang mengkaji <b>kebarangkalian</b> - iaitu cabang matematik yang mengkaji kemungkinan sesuatu berlaku. Semakin banyak data yang anda kumpul, semakin hampir keputusan eksperimen anda dengan teori sebenar.</p>", riasec: "<b>Suka Menyiasat (Investigative)</b>: Kamu suka mengumpul data dan melihat corak.", mi: "Pandai Nombor, Pandai Logik.", careers: "Penganalisis Sukan (Sports Analyst), Pakar Insurans (Aktuari), Penganalisis Risiko Kewangan.", panduanKaunselor: "Gunakan untuk membincangkan 'ketidakpastian' dan 'ramalan'. Hidup ini penuh dengan perkara yang tidak pasti, seperti lontaran dadu. Bincangkan: 'Walaupun kita tak boleh kawal semua benda, bagaimana kita boleh buat persediaan yang lebih baik berdasarkan kemungkinan? (Cth: Bawa payung kalau langit mendung).' Ini mengajar pemikiran strategik." },
                    { title: "Seni Jalur Mobius", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Jalur kertas panjang (kira-kira 3cm x 28cm)</li><li>Pita pelekat, pen, gunting</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Ambil jalur kertas. Sebelum anda menyambungkan kedua-dua hujungnya menjadi gelung, pulas salah satu hujung sebanyak sekali (180 darjah).</li><li>Lekatkan hujung-hujungnya. Ini ialah Jalur Mobius.</li><li>Cuba lukis satu garisan di tengah-tengah jalur tanpa mengangkat pen. Apa yang berlaku? Anda akan kembali ke tempat anda bermula, dan kedua-dua 'belah' jalur telah diwarnakan! Ia hanya ada SATU sisi!</li><li>Sekarang, cuba potong di sepanjang garisan yang anda lukis. Adakah ia menjadi dua gelung? (Jawapan: Tidak! Ia menjadi satu gelung yang lebih besar!)</li></ol><br><p><b>Kenapa jadi macam tu?</b> Ini adalah objek matematik pelik yang dipanggil permukaan tidak berorientasi. Ia menguji pemahaman kita tentang sisi dan ruang.</p>", riasec: "<b>Suka Menyiasat (Investigative) & Seni (Artistic)</b>: Kamu suka objek yang pelik dan mencabar minda.", mi: "Pandai Lihat Ruang, Pandai Logik.", careers: "Ahli Matematik Tulen, Ahli Topologi, Arkitek (reka bentuk bangunan unik).", panduanKaunselor: "Gunakan jalur Mobius sebagai metafora untuk 'pemikiran yang bersambung' atau 'melihat sesuatu dari semua sudut'. Bincangkan bagaimana garisan itu bersambung tanpa henti. Kaitkan dengan menyelesaikan konflik: 'Bagaimana kita boleh melihat satu cerita dari 'sisi' orang lain untuk memahami gambaran penuh?'" },
                    { title: "Pecahkan Kod Caesar", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Kertas dan pensel</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Kod Caesar mengganjakkan huruf. Mari kita guna anjakan +3 (Kunci = 3). Ini bermakna A menjadi D, B menjadi E, C menjadi F, dan seterusnya.</li><li>Tulis mesej rahsia anda. Contoh: 'JUMPA SAYA'.</li><li>Tukarkan setiap huruf menggunakan kunci +3: J -> M, U -> X, M -> P, P -> S, A -> D, S -> V, A -> D, Y -> B, A -> D. Mesej rahsia anda ialah 'MXPS D VDBD'.</li><li>Beri mesej berkod dan 'Kunci=3' kepada kawan. Bolehkah dia menyahsulitkannya dengan mengganjakkan huruf ke belakang?</li></ol><br><p><b>Kenapa buat macam ni?</b> Ini adalah salah satu bentuk kriptografi terawal, digunakan oleh Julius Caesar. Ia mengajar tentang algoritma (satu set peraturan) dan pemikiran logik yang sistematik.</p>", riasec: "<b>Suka Menyiasat (Investigative)</b>: Kamu suka memecahkan kod dan corak.", mi: "Pandai Logik, Pandai Bahasa.", careers: "Ahli Kriptografi, Penganalisis Keselamatan Siber, Ahli Linguistik Komputer.", panduanKaunselor: "Aktiviti ini adalah tentang 'peraturan' dan 'sistem'. Bincangkan kenapa penting untuk mempunyai sistem atau peraturan (di sekolah, di rumah). Gunakan juga untuk membincangkan keselamatan digital: 'Kenapa penting untuk kita 'sulitkan' atau rahsiakan kata laluan kita?'" },
                    { title: "Ukur Tinggi Pokok", steps: "<b>Bahan-bahan:</b><ul class='list-disc list-inside ml-4'><li>Pita pengukur</li><li>Seorang kawan</li><li>Cuaca cerah (supaya ada bayang-bayang)</li></ul><b>Jom cuba:</b><br><ol class='list-decimal list-inside ml-4'><li>Ukur ketinggian kawan anda.</li><li>Kemudian, ukur panjang bayang-bayang kawan anda di atas tanah.</li><li>Seterusnya, ukur panjang bayang-bayang pokok.</li><li>Ini formulanya: <b>(Panjang bayang-bayang pokok ÷ Panjang bayang-bayang kawan) × Ketinggian kawan = Ketinggian pokok.</b></li><li>Guna kalkulator untuk mengira. Anda kini tahu ketinggian pokok tanpa perlu memanjatnya!</li></ol><br><p><b>Kenapa jadi macam tu?</b> Pada masa yang sama, sudut cahaya matahari adalah sama. Ini mewujudkan segi tiga yang serupa (satu untuk kawan anda, satu untuk pokok). Nisbah ketinggian kepada bayang-bayang adalah sama untuk kedua-duanya.</p>", riasec: "<b>Suka Menyiasat (Investigative) & Realistik (Realistic)</b>: Kamu suka menggunakan matematik untuk mengukur dunia sebenar.", mi: "Pandai Logik, Pandai Lihat Ruang.", careers: "Juruukur Tanah, Arkitek, Pegawai Perhutanan, Jurutera Awam.", panduanKaunselor: "Ini adalah contoh hebat bagaimana matematik boleh digunakan untuk menyelesaikan masalah dunia sebenar. Gunakan ini untuk membincangkan 'pemikiran tidak langsung': 'Kita tidak boleh ukur pokok itu secara terus, jadi kita guna cara lain yang bijak. Dalam hidup, jika ada masalah yang tidak boleh diselesaikan secara terus, apakah cara lain yang boleh kita fikirkan?'" }
                ]
            }
        };
        const passwords = { junior: "JUNIORSTEM25", intermediate: "INTERSTEM25", senior: "SENIORSTEM25", sijil: "SIJILSTEM2025" };
        
        let currentPasswordCallback = null;
        let activeActivity = null;

        document.addEventListener('DOMContentLoaded', () => {
            const welcomeModal = document.getElementById('welcome-modal');
            if (sessionStorage.getItem('welcomeShown')) {
                welcomeModal.classList.add('hidden');
            }
            const closeWelcomeModal = () => {
                welcomeModal.classList.add('modal-exit');
                setTimeout(() => welcomeModal.classList.add('hidden'), 500);
                sessionStorage.setItem('welcomeShown', 'true');
            };
            document.getElementById('close-welcome-btn').addEventListener('click', closeWelcomeModal);
            setTimeout(closeWelcomeModal, 15000);

            Chart.register(ChartDataLabels);

            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.dataset.tab;
                    tabButtons.forEach(btn => btn.classList.remove('tab-active'));
                    button.classList.add('tab-active');
                    tabContents.forEach(content => content.classList.add('hidden'));
                    document.getElementById(tabId).classList.remove('hidden');

                    if (tabId === 'peserta' && !document.getElementById('peserta').dataset.loaded) {
                        loadPesertaData();
                        document.getElementById('peserta').dataset.loaded = 'true';
                    }
                    if (tabId === 'graf' && !document.getElementById('graf').dataset.loaded) {
                        loadGrafData();
                        document.getElementById('graf').dataset.loaded = 'true';
                    }
                });
            });

            document.getElementById('ai-counselor-btn').addEventListener('click', generateAICounselorResponse);
            document.getElementById('ai-summary-btn').addEventListener('click', generateAISummary);
            
            populateLevelContent('junior');
        });

        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.remove('hidden');
            const modalContent = modal.querySelector('.glass-effect');
            if(modalContent){
                modalContent.classList.add('modal-enter');
                modalContent.classList.remove('modal-exit');
            }
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            const modalContent = modal.querySelector('.glass-effect');
            if (modalContent) {
                modalContent.classList.remove('modal-enter');
                modalContent.classList.add('modal-exit');
            }
            setTimeout(() => {
                modal.classList.add('hidden');
                if (modalContent) modalContent.classList.remove('modal-exit');
            }, 500);
            document.body.style.overflow = '';
        }
        
        function populateLevelContent(level) {
            const levelContentContainer = document.querySelector(`div[data-level-content="${level}"]`);
            // FIX: Check if content headers have actually been populated, not just if the div has comments.
            if (!levelContentContainer || levelContentContainer.querySelector('.category-header')) return;
            
            const categories = ['science', 'technology', 'engineering', 'mathematics'];
            const icons = {
                science: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M14.25 10.5v-4.5m-4.5v4.5m-4.5 4.5h13.5m-13.5 0a9 9 0 1 1 18 0 9 9 0 0 1-18 0Z" /></svg>`,
                technology: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m10.5 1.5.375 1.5a1.5 1.5 0 0 0 2.25 1.5l1.5-.375 1.5 2.25-1.5.375a1.5 1.5 0 0 0-1.5 2.25l.375 1.5-2.25 1.5-.375-1.5a1.5 1.5 0 0 0-2.25-1.5l-1.5.375-1.5-2.25 1.5-.375a1.5 1.5 0 0 0 1.5-2.25l-.375-1.5 2.25-1.5Zm-7.5 7.5.375 1.5a1.5 1.5 0 0 0 2.25 1.5l1.5-.375 1.5 2.25-1.5.375a1.5 1.5 0 0 0-1.5 2.25l.375 1.5-2.25 1.5-.375-1.5a1.5 1.5 0 0 0-2.25-1.5l-1.5.375-1.5-2.25 1.5-.375a1.5 1.5 0 0 0 1.5-2.25l-.375-1.5 2.25-1.5Zm15 0 .375 1.5a1.5 1.5 0 0 0 2.25 1.5l1.5-.375 1.5 2.25-1.5.375a1.5 1.5 0 0 0-1.5 2.25l.375 1.5-2.25 1.5-.375-1.5a1.5 1.5 0 0 0-2.25-1.5l-1.5.375-1.5-2.25 1.5-.375a1.5 1.5 0 0 0 1.5-2.25l-.375-1.5 2.25-1.5Z" /></svg>`,
                engineering: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m7.848 8.25 1.536.887M7.848 8.25a3 3 0 1 0 0 7.5h.002a3 3 0 0 0 0-7.5Zm1.152 9.06a3 3 0 1 0 0-7.5m0 7.5h.001a3 3 0 1 1 0-7.5m-1.536.887a3 3 0 1 0 0 7.5m0-7.5a3 3 0 1 1 0 7.5M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Z" /></svg>`,
                mathematics: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 3h.008v.008H8.25v-.008Zm0 3h.008v.008H8.25v-.008Zm3-6h.008v.008H11.25v-.008Zm0 3h.008v.008H11.25v-.008Zm0 3h.008v.008H11.25v-.008Zm3-6h.008v.008H14.25v-.008Zm0 3h.008v.008H14.25v-.008Zm-12-3.75h14.25c.621 0 1.125-.504 1.125-1.125V11.25c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z" /></svg>`
            };
            const colors = { science: 'cyan', technology: 'green', engineering: 'orange', mathematics: 'purple' };
            
            let html = '';
            categories.forEach(category => {
                const categoryName = category.charAt(0).toUpperCase() + category.slice(1);
                html += `
                    <div>
                        <div class="category-header text-${colors[category]}-400">
                            ${icons[category]}
                            <h3 class="text-2xl font-semibold mb-2 mt-2">${categoryName}</h3>
                        </div>
                        <div class="border-b-2 border-${colors[category]}-400/30 w-full mb-4"></div>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 category-grid" data-category="${category}"></div>
                    </div>
                `;
            });
            levelContentContainer.innerHTML = html;
        }

        function populateActivityCards(level) {
            populateLevelContent(level);
            const levelData = activityData[level];
            const levelContentContainer = document.querySelector(`div[data-level-content="${level}"]`);
            const icons = {
                science: '🔬', technology: '💻', engineering: '⚙️', mathematics: '📊'
            };
            const colors = { science: 'cyan', technology: 'green', engineering: 'orange', mathematics: 'purple' };

            for (const category in levelData) {
                const categoryGrid = levelContentContainer.querySelector(`.category-grid[data-category="${category}"]`);
                if(categoryGrid) {
                    categoryGrid.innerHTML = '';
                    levelData[category].forEach(activity => {
                        const card = document.createElement('div');
                        card.className = `activity-card glass-effect p-4 rounded-lg flex flex-col justify-between h-full border-b-4 border-transparent hover:border-${colors[category]}-500`;
                        card.innerHTML = `
                            <div>
                                <h4 class="font-bold text-lg text-slate-100">${activity.title}</h4>
                                <p class="text-sm text-slate-400 mt-2">${activity.riasec}</p>
                            </div>
                            <button class="mt-4 w-full py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-sm font-semibold transition-colors duration-300 z-10">Lihat Butiran</button>
                            <div class="activity-card-icon">${icons[category]}</div>
                        `;
                        card.querySelector('button').onclick = () => showActivityDetails(activity);
                        categoryGrid.appendChild(card);
                    });
                }
            }
        }

        function showActivityDetails(activity) {
            activeActivity = activity;
            document.getElementById('activity-modal-title').textContent = activity.title;
            document.getElementById('activity-modal-steps').innerHTML = activity.steps;
            document.getElementById('activity-modal-riasec').innerHTML = activity.riasec;
            document.getElementById('activity-modal-mi').innerHTML = activity.mi;
            document.getElementById('activity-modal-careers').innerHTML = activity.careers;
            document.getElementById('activity-modal-guidance').innerHTML = activity.panduanKaunselor;
            
            const aiBtn = document.getElementById('ai-counselor-btn');
            aiBtn.disabled = false;
            aiBtn.textContent = 'Tanya Kaunselor AI';
            document.getElementById('ai-counselor-response').classList.add('hidden');
            document.getElementById('ai-counselor-text').textContent = '';

            openModal('activity-modal');
        }

        function promptForLevel(level) {
            const container = document.querySelector(`div[data-level-content="${level}"]`);
            if (!container.classList.contains('hidden')) {
                container.classList.add('hidden');
                return;
            }
            
            document.getElementById('password-title').textContent = `Buka Kunci ${level.charAt(0).toUpperCase() + level.slice(1)}`;
            document.getElementById('password-text').textContent = `Sila masukkan kata kunci untuk tahap ${level}.`;
            document.getElementById('password-input').value = '';
            
            currentPasswordCallback = (password) => {
                if (password.toUpperCase() === passwords[level].toUpperCase()) {
                    closeModal('password-modal');
                    container.classList.remove('hidden');
                    populateActivityCards(level);
                } else {
                    alert('Kata kunci salah. Sila cuba lagi.');
                }
            };

            document.getElementById('password-submit').onclick = () => {
                const password = document.getElementById('password-input').value;
                if (currentPasswordCallback) currentPasswordCallback(password);
            };
            
            openModal('password-modal');
        }

        function showCertificateModal() {
             document.getElementById('password-title').textContent = 'Jana Sijil';
             document.getElementById('password-text').textContent = `Sila masukkan kata kunci untuk menjana sijil anda.`;
             document.getElementById('password-input').value = '';

             currentPasswordCallback = (password) => {
                 if (password.toUpperCase() === passwords.sijil.toUpperCase()) {
                     closeModal('password-modal');
                     openModal('certificate-info-modal');
                 } else {
                     alert('Kata kunci salah. Sila cuba lagi.');
                 }
             };

            document.getElementById('password-submit').onclick = () => {
                const password = document.getElementById('password-input').value;
                if(currentPasswordCallback) currentPasswordCallback(password);
            };

             openModal('password-modal');
        }

        function generateCertificate() {
            const name = document.getElementById('cert-name').value;
            const className = document.getElementById('cert-class').value;
            if (!name || !className) {
                alert('Sila isi nama penuh dan kelas anda.');
                return;
            }
            closeModal('certificate-info-modal');

            const canvas = document.getElementById('certificateCanvas');
            const ctx = canvas.getContext('2d');
            const width = 800;
            const height = 565;
            canvas.width = width;
            canvas.height = height;

            ctx.fillStyle = '#FFFFFF';
            ctx.fillRect(0, 0, width, height);
            
            ctx.strokeStyle = '#22d3ee';
            ctx.lineWidth = 15;
            ctx.strokeRect(0, 0, width, height);
            ctx.strokeStyle = '#a855f7';
            ctx.lineWidth = 5;
            ctx.strokeRect(15, 15, width - 30, height - 30);

            ctx.fillStyle = '#000000';
            ctx.font = 'bold 50px Poppins, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('Sijil Penyertaan', width / 2, 120);
            ctx.font = '20px Poppins, sans-serif';
            ctx.fillText('Dengan ini disahkan bahawa', width / 2, 180);

            ctx.fillStyle = '#0369a1';
            
            let fontSize = 60;
            ctx.font = `italic bold ${fontSize}px Poppins, sans-serif`;
            const maxWidth = width - 150; 
            while (ctx.measureText(name).width > maxWidth && fontSize > 20) {
                fontSize--;
                ctx.font = `italic bold ${fontSize}px Poppins, sans-serif`;
            }
            ctx.fillText(name, width / 2, 270);

            ctx.fillStyle = '#000000';
            ctx.font = '20px Poppins, sans-serif';
            ctx.fillText(`dari kelas ${className}`, width / 2, 320);
            ctx.fillText('telah menyertai program', width / 2, 380);
            ctx.font = 'bold 24px Poppins, sans-serif';
            ctx.fillText('Eksplorasi Minat Kerjaya STEM', width / 2, 420);

            ctx.strokeStyle = '#000000';
            ctx.beginPath();
            ctx.moveTo(width / 2 - 100, 480);
            ctx.lineTo(width / 2 + 100, 480);
            ctx.stroke();
            ctx.font = '16px Poppins, sans-serif';
            ctx.fillText('Guru Kaunseling', width / 2, 500);

            document.getElementById('certificate-display').classList.remove('hidden');
            const link = document.getElementById('download-cert-link');
            link.href = canvas.toDataURL('image/png');
            link.download = `Sijil_STEM_${name}.png`;
        }

        async function callGeminiAPI(prompt) {
            const apiKey = ""; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            try {
                const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }) });
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                const data = await response.json();
                return data.candidates[0].content.parts[0].text;
            } catch (error) {
                console.error("Error calling Gemini API:", error);
                return "Maaf, berlaku ralat semasa menghubungi AI. Sila cuba lagi.";
            }
        }

        async function generateAICounselorResponse() {
            if (!activeActivity) return;
            const aiBtn = document.getElementById('ai-counselor-btn');
            const responseContainer = document.getElementById('ai-counselor-response');
            const loading = document.getElementById('ai-counselor-loading');
            const text = document.getElementById('ai-counselor-text');
            aiBtn.disabled = true;
            aiBtn.textContent = 'AI Sedang Menaip...';
            responseContainer.classList.remove('hidden');
            loading.classList.remove('hidden');
            text.textContent = '';
            const prompt = `Sebagai seorang kaunselor kerjaya yang sangat mesra, berikan nasihat ringkas (dalam 3-4 ayat) kepada seorang murid sekolah rendah di Malaysia yang baru sahaja mencuba aktiviti STEM bernama "${activeActivity.title}". Kaitkan pengalaman melakukan aktiviti ini dengan potensi kerjaya hebat (${activeActivity.careers}). Berikan kata-kata semangat. Gunakan bahasa Melayu yang mudah dan ceria.`;
            const result = await callGeminiAPI(prompt);
            loading.classList.add('hidden');
            text.textContent = result;
        }

        const GOOGLE_SHEET_URL = 'https://docs.google.com/spreadsheets/d/1En8lFDLrOxMyxJUEgrTJDYWEQOTkfaAiYrm1WalsHSQ/gviz/tq?tqx=out:csv&sheet=Sheet1';
        let sheetData = null;

        async function fetchData() {
            if (sheetData) return sheetData;
            try {
                const response = await fetch(GOOGLE_SHEET_URL);
                const csvText = await response.text();
                const rows = csvText.split('\n').map(row => row.substring(1, row.length - 1).split('","'));
                const headers = rows[0];
                const data = rows.slice(1).map(row => {
                    let obj = {};
                    headers.forEach((header, i) => { obj[header] = row[i]; });
                    return obj;
                });
                sheetData = data.filter(row => row['NAMA PENUH']);
                return sheetData;
            } catch (error) {
                console.error("Gagal memuat turun data dari Google Sheet:", error);
                return [];
            }
        }

        async function loadPesertaData() {
            const data = await fetchData();
            const tableBody = document.querySelector('#peserta-table tbody');
            const tableHead = document.querySelector('#peserta-table thead tr');
            const loadingDiv = document.getElementById('loading-peserta');
            if (!data || data.length === 0) {
                loadingDiv.textContent = 'Tiada data peserta ditemui.';
                return;
            }
            const headersToShow = ['NAMA PENUH', 'KELAS', 'TAHAP', 'KATEGORI', 'AKTIVITI'];
            tableHead.innerHTML = headersToShow.map(h => `<th class="px-4 py-2">${h}</th>`).join('');
            tableBody.innerHTML = '';
            data.forEach(row => {
                const tr = document.createElement('tr');
                tr.className = "hover:bg-slate-800";
                let rowHtml = '';
                headersToShow.forEach(header => { rowHtml += `<td class="px-4 py-2 border-b border-slate-700">${row[header] || ''}</td>`; });
                tr.innerHTML = rowHtml;
                tableBody.appendChild(tr);
            });
            loadingDiv.classList.add('hidden');
            document.getElementById('peserta-table').classList.remove('hidden');
        }

        async function loadGrafData() {
            const data = await fetchData();
            const loadingDiv = document.getElementById('loading-graf');
            if (!data || data.length === 0) {
                loadingDiv.textContent = 'Tiada data untuk dipaparkan pada graf.';
                return;
            }
            const participantCount = {};
            data.forEach(row => { const name = row['NAMA PENUH']; participantCount[name] = (participantCount[name] || 0) + 1; });
            const leaderboard = Object.entries(participantCount).sort((a, b) => b[1] - a[1]).slice(0, 10);
            const medals = ['🥇', '🥈', '🥉'];
            document.getElementById('leaderboard-body').innerHTML = leaderboard.map(([name, count], index) => `
                <tr class="leaderboard-row hover:bg-slate-800"><td class="px-4 py-2">${medals[index] || index + 1}</td><td class="px-4 py-2">${name}</td><td class="px-4 py-2 text-center">${count}</td></tr>`).join('');
            const categoryCount = data.reduce((acc, row) => { const c = row['KATEGORI']; if(c) acc[c] = (acc[c] || 0) + 1; return acc; }, {});
            const classCount = data.reduce((acc, row) => { const c = row['KELAS']; if(c) acc[c] = (acc[c] || 0) + 1; return acc; }, {});
            const top10Classes = Object.entries(classCount).sort((a,b) => b[1]-a[1]).slice(0, 10);
            const activityCount = data.reduce((acc, row) => { const a = row['AKTIVITI']; if(a) acc[a] = (acc[a] || 0) + 1; return acc; }, {});
            const top5Activities = Object.entries(activityCount).sort((a,b) => b[1]-a[1]).slice(0, 5);
            const levelCategoryCount = data.reduce((acc, row) => {
                const level = row['TAHAP']; const category = row['KATEGORI'];
                if (level && category) { if (!acc[level]) acc[level] = {}; acc[level][category] = (acc[level][category] || 0) + 1; }
                return acc;
            }, {});
            createChart('kategoriChartCanvas', 'pie', Object.keys(categoryCount), Object.values(categoryCount), 'Kategori STEM');
            createChart('kelasChartCanvas', 'bar', top10Classes.map(c => c[0]), top10Classes.map(c => c[1]), 'Penyertaan Kelas');
            createChart('aktivitiChartCanvas', 'bar', top5Activities.map(a => a[0]), top5Activities.map(a => a[1]), 'Aktiviti Popular', 'x');
            new Chart(document.getElementById('hubunganChartCanvas').getContext('2d'), { type: 'bubble', data: { datasets: Object.keys(levelCategoryCount).map((level, i) => ({ label: level, data: Object.keys(levelCategoryCount[level]).map(category => ({ x: category, y: level, r: levelCategoryCount[level][category] * 5 })), backgroundColor: `rgba(${[100,200,255][i]}, 0.6)` })) }, options: { responsive: true, maintainAspectRatio: false } });
            loadingDiv.classList.add('hidden');
            document.getElementById('graf-grid').classList.remove('hidden');
            generateAISummary();
        }

        async function generateAISummary() {
            const loading = document.getElementById('ai-summary-loading');
            const text = document.getElementById('ai-summary-text');
            loading.classList.remove('hidden');
            text.textContent = 'Menganalisis data penyertaan terkini...';
            const data = await fetchData();
            if (!data || data.length === 0) { text.textContent = 'Tiada data untuk dianalisis.'; loading.classList.add('hidden'); return; }
            const totalParticipants = new Set(data.map(d => d['NAMA PENUH'])).size;
            const totalActivities = data.length;
            const categoryCounts = data.reduce((acc, row) => { const c = row['KATEGORI']; if (c) acc[c] = (acc[c] || 0) + 1; return acc; }, {});
            const topCategory = Object.entries(categoryCounts).sort((a, b) => b[1] - a[1])[0] || ['Tiada', 0];
            const prompt = `Sebagai penganalisis data, berikan rumusan ringkas (dalam 3-4 ayat) berdasarkan data berikut mengenai program STEM di sebuah sekolah di Malaysia:\n- Jumlah peserta unik: ${totalParticipants}\n- Jumlah aktiviti yang telah diselesaikan: ${totalActivities}\n- Kategori paling popular: ${topCategory[0]} (${topCategory[1]} penyertaan)\nFokus pada pencapaian dan galakkan penyertaan selanjutnya. Gunakan bahasa Melayu yang formal tetapi menarik.`;
            const result = await callGeminiAPI(prompt);
            loading.classList.add('hidden');
            text.textContent = result;
        }

        function createChart(canvasId, type, labels, data, label, indexAxis = 'y') {
            const ctx = document.getElementById(canvasId).getContext('2d');
            const chartColors = [getComputedStyle(document.documentElement).getPropertyValue('--c-science'), getComputedStyle(document.documentElement).getPropertyValue('--c-math'), '#f472b6', getComputedStyle(document.documentElement).getPropertyValue('--c-tech'), getComputedStyle(document.documentElement).getPropertyValue('--c-eng'), '#ef4444'];
            new Chart(ctx, { type, data: { labels, datasets: [{ label, data, backgroundColor: chartColors.map(c => c + '99'), borderColor: chartColors, borderWidth: 1 }] }, options: { indexAxis: type === 'bar' ? indexAxis : undefined, responsive: true, maintainAspectRatio: false, plugins: { legend: { display: type === 'pie', labels: {color: '#e2e8f0'} }, datalabels: { color: '#fff', font: {weight: 'bold'}, formatter: (value, context) => { if (type === 'pie') { const total = context.chart.data.datasets[0].data.reduce((a, b) => a + b, 0); return (value / total * 100).toFixed(1) + '%'; } return value; } } } } });
        }


        // --- DATA & LOGIK KUIZ MINAT KERJAYA ---
        const quizQuestions = [
            { question: "Kalau kamu ada masa lapang, apa yang paling kamu suka buat?", options: [ { text: "Menyiasat kenapa daun berwarna hijau atau kenapa pelangi muncul.", field: "science" }, { text: "Bermain permainan video atau cuba aplikasi baharu di telefon.", field: "technology" }, { text: "Membina rumah atau istana guna blok LEGO.", field: "engineering" }, { text: "Menyelesaikan teka-teki Sudoku atau mengira duit tabung.", field: "mathematics" } ] },
            { question: "Bila buat kerja sekolah dengan kawan-kawan, kamu suka...", options: [ { text: "Mencari maklumat dan fakta menarik di dalam buku atau internet.", field: "science" }, { text: "Tolong kawan-kawan guna komputer untuk siapkan kerja.", field: "technology" }, { text: "Merancang langkah-langkah untuk siapkan projek dari awal sampai akhir.", field: "engineering" }, { text: "Memastikan semua nombor dan kiraan adalah betul.", field: "mathematics" } ] },
            { question: "Di sekolah, kelas mana yang paling seronok?", options: [ { text: "Kelas Sains, masa belajar tentang haiwan dan tumbuhan.", field: "science" }, { text: "Kelas Komputer, masa dapat guna komputer dan tablet.", field: "technology" }, { text: "Kelas Reka Bentuk, masa boleh cipta dan bina barang.", field: "engineering" }, { text: "Kelas Matematik, masa dapat selesaikan soalan kira-kira.", field: "mathematics" } ] },
            { question: "Mainan jenis apa yang paling kamu suka?", options: [ { text: "Set eksperimen sains seperti volkano atau mikroskop.", field: "science" }, { text: "Tablet atau konsol permainan video.", field: "technology" }, { text: "Blok binaan seperti LEGO atau set mekanik.", field: "engineering" }, { text: "Papan permainan yang ada strategi seperti catur atau dam.", field: "mathematics" } ] },
            { question: "Bila besar nanti, kamu nak cipta apa?", options: [ { text: "Ubat baharu untuk sembuhkan orang sakit.", field: "science" }, { text: "Robot yang boleh tolong buat kerja rumah.", field: "technology" }, { text: "Bangunan pencakar langit yang paling tinggi di dunia.", field: "engineering" }, { text: "Satu kod rahsia yang tiada siapa boleh pecahkan.", field: "mathematics" } ] },
            { question: "Kamu paling suka berada di mana?", options: [ { text: "Di taman atau zoo, memerhati alam semula jadi.", field: "science" }, { text: "Di depan komputer, melayari internet atau belajar benda baharu.", field: "technology" }, { text: "Di dalam bengkel, membina sesuatu dengan alatan.", field: "engineering" }, { text: "Di meja belajar, fokus menyelesaikan teka-teki.", field: "mathematics" } ] },
            { question: "Apa yang kawan-kawan selalu puji tentang kamu?", options: [ { text: "Suka bertanya 'kenapa' dan ingin tahu semua perkara.", field: "science" }, { text: "Pandai guna telefon atau komputer.", field: "technology" }, { text: "Pandai baiki mainan yang rosak.", field: "engineering" }, { text: "Cepat mengira dan suka nombor.", field: "mathematics" } ] },
            { question: "Jika ada satu masalah besar, bagaimana kamu akan selesaikannya?", options: [ { text: "Saya akan buat kajian untuk faham kenapa masalah itu berlaku.", field: "science" }, { text: "Saya akan cipta satu aplikasi untuk bantu selesaikannya.", field: "technology" }, { text: "Saya akan bina satu mesin atau alat untuk selesaikannya.", field: "engineering" }, { text: "Saya akan guna data dan corak untuk cari jawapan terbaik.", field: "mathematics" } ] },
            { question: "Rancangan TV atau kartun apa yang paling kamu suka tonton?", options: [ { text: "Rancangan tentang haiwan atau alam semesta.", field: "science" }, { text: "Rancangan tentang teknologi canggih atau robot.", field: "technology" }, { text: "Rancangan di mana mereka membina benda-benda hebat.", field: "engineering" }, { text: "Rancangan kuiz yang ada banyak soalan teka-teki.", field: "mathematics" } ] },
            { question: "Kamu nak jadi seorang wira yang bagaimana?", options: [ { text: "Wira yang menemui rahsia alam.", field: "science" }, { text: "Wira yang mencipta gajet hebat untuk semua orang.", field: "technology" }, { text: "Wira yang membina rumah dan jambatan untuk orang ramai.", field: "engineering" }, { text: "Wira yang boleh menyelesaikan masalah paling sukar dengan bijak.", field: "mathematics" } ] }
        ];
        const careerDetails = {
            science: { 
                title: "🔬 Bidang Sains", 
                description: "Orang dalam bidang Sains adalah penyiasat alam semula jadi. Mereka sentiasa bertanya 'kenapa' dan 'bagaimana', kemudian melakukan eksperimen untuk membongkar rahsia dunia, dari sekecil-kecil kuman hingga ke sebesar-besar bintang di angkasa.", 
                careers: [ 
                    { name: "Ahli Biologi Marin 🐠", description: "Menyelam ke lautan dalam untuk mengkaji hidupan laut yang pelik dan menakjubkan seperti ikan pemancing dan sotong gergasi.", kemahiran: "Berani, suka alam, pemerhati yang baik.", subjek: "Sains, Geografi." }, 
                    { name: "Doktor 🩺", description: "Menjadi seperti detektif badan manusia, mencari petunjuk (simptom) untuk mengetahui punca penyakit dan memberi ubat yang betul untuk menyembuhkan pesakit.", kemahiran: "Empati, penyelesai masalah, tenang.", subjek: "Sains, Bahasa." }, 
                    { name: "Ahli Astronomi 🔭", description: "Menggunakan teleskop gergasi untuk melihat galaksi yang jauh, mencari planet baharu, dan mengkaji misteri lohong hitam.", kemahiran: "Sabar, teliti, pandai matematik.", subjek: "Sains, Matematik." },
                    { name: "Ahli Forensik CSI 🕵️‍♀️", description: "Mengumpul dan menganalisis bukti di tempat kejadian jenayah seperti cap jari dan DNA untuk membantu polis menyelesaikan kes misteri.", kemahiran: "Sangat teliti, suka menyelesaikan teka-teki, berani.", subjek: "Sains (Kimia & Biologi), Bahasa." },
                    { name: "Pakar Kaji Cuaca ⛈️", description: "Menggunakan komputer super dan satelit untuk meramal cuaca, memberi amaran tentang ribut, dan mengkaji perubahan iklim.", kemahiran: "Pandai menganalisis corak, suka geografi, komunikasi yang baik.", subjek: "Sains (Fizik), Geografi, Matematik." },
                    { name: "Pakar Pemakanan 🥗", description: "Mengkaji makanan dan nutrien untuk menasihati orang ramai, termasuk atlet, tentang cara makan dengan sihat untuk kekal cergas dan kuat.", kemahiran: "Suka menolong, pandai sains makanan, komunikasi.", subjek: "Sains (Biologi), Pendidikan Jasmani & Kesihatan." }
                ] 
            },
            technology: { 
                title: "💻 Bidang Teknologi", 
                description: "Pakar Teknologi adalah pencipta masa depan. Mereka membina alatan dan program yang menjadikan hidup kita lebih mudah, lebih seronok, dan lebih terhubung, daripada permainan video di telefon hinggalah kepada robot pintar.", 
                careers: [ 
                    { name: "Pembangun Permainan Video 🎮", description: "Mencipta dunia fantasi yang epik, watak wira yang hebat, dan cabaran yang menyeronokkan dalam permainan video kegemaran semua orang.", kemahiran: "Kreatif, pemikiran logik, suka seni.", subjek: "Matematik, Seni, Bahasa Inggeris." }, 
                    { name: "Jurutera Robotik 🤖", description: "Membina dan memprogram robot untuk melakukan pelbagai tugas, daripada membantu di hospital sehinggalah menjelajah planet Marikh.", kemahiran: "Suka membina, pandai menyelesaikan masalah, inovatif.", subjek: "RBT, Sains, Matematik." },
                    { name: "Pakar Keselamatan Siber 🛡️", description: "Menjadi 'pengawal' digital yang melindungi maklumat penting daripada penggodam jahat, memastikan internet adalah tempat yang selamat untuk semua.", kemahiran: "Suka teka-teki, teliti, berfikir seperti penjenayah.", subjek: "Matematik, TMK." },
                    { name: "Pereka UI/UX 📱", description: "Mereka bentuk rupa dan 'rasa' sesebuah aplikasi atau laman web supaya ia bukan sahaja cantik, tetapi juga sangat mudah dan seronok untuk digunakan.", kemahiran: "Kreatif, empati (faham pengguna), suka seni.", subjek: "Seni, Reka Bentuk & Teknologi (RBT), Psikologi." },
                    { name: "Pencipta Kandungan Digital 📹", description: "Menjadi bintang YouTube atau TikToker yang menghasilkan video, podcast, atau artikel menarik tentang topik yang diminati, menggunakan teknologi untuk menyunting dan berkongsi.", kemahiran: "Kreatif, pandai bercerita, kemahiran teknikal (video/audio).", subjek: "Bahasa, Seni Visual, TMK." },
                    { name: "Pentadbir Pangkalan Data 🗄️", description: "Menjadi 'pustakawan' untuk data digital yang sangat besar, menyusun dan melindunginya supaya maklumat penting boleh dicari dengan pantas dan selamat.", kemahiran: "Sangat teratur, teliti, logik.", subjek: "Matematik, TMK, Prinsip Perakaunan." }
                ] 
            },
            engineering: { 
                title: "⚙️ Bidang Kejuruteraan", 
                description: "Jurutera adalah pembina impian. Mereka mengambil idea dari imaginasi dan menukarkannya kepada realiti, sama ada ia sebuah bangunan pencakar langit yang menembusi awan, kereta lumba yang laju, atau jambatan yang menghubungkan dua daratan.", 
                careers: [ 
                    { name: "Jurutera Aeroangkasa 🚀", description: "Mereka bentuk dan membina roket yang boleh terbang ke bulan dan kapal terbang yang boleh mengelilingi dunia dalam beberapa jam sahaja.", kemahiran: "Berimaginasi tinggi, pandai fizik, teliti.", subjek: "Sains, Matematik, RBT." }, 
                    { name: "Arkitek 🏙️", description: "Melukis dan mereka bentuk bangunan yang bukan sahaja cantik, tetapi juga selamat dan mesra alam, daripada rumah idaman hinggalah ke stadium sukan.", kemahiran: "Kreatif, pandai melukis, pandai ruang.", subjek: "Seni, Matematik, Geografi." }, 
                    { name: "Jurutera Audio 🎧", description: "Mereka bentuk sistem bunyi untuk konsert yang gegak-gempita atau mencipta kesan bunyi yang realistik untuk filem, seperti bunyi deruman dinosaur atau letupan di angkasa.", kemahiran: "Telinga yang tajam, kreatif, teknikal.", subjek: "Sains (Fizik), Muzik." },
                    { name: "Jurutera Alam Sekitar 💧", description: "Mereka cipta solusi untuk masalah pencemaran, seperti membina sistem penapisan air yang canggih atau mencari cara untuk menukar sampah menjadi tenaga.", kemahiran: "Suka alam semula jadi, penyelesai masalah, inovatif.", subjek: "Sains (Kimia, Biologi), Geografi." },
                    { name: "Jurutera Bioperubatan ❤️", description: "Mencipta alatan perubatan yang menyelamatkan nyawa, seperti tangan robotik (prostetik), jantung tiruan, atau mesin pengimbas canggih di hospital.", kemahiran: "Suka menolong, pandai sains, reka cipta.", subjek: "Sains (Biologi, Fizik), RBT." },
                    { name: "Jurutera Sivil 🌉", description: "Merancang, mereka bentuk, dan menyelia pembinaan projek mega seperti jambatan gantung, terowong bawah tanah, dan empangan hidroelektrik.", kemahiran: "Pandai merancang, pemikiran skala besar, kepimpinan.", subjek: "Matematik (Geometri), Fizik, RBT." }
                ] 
            },
            mathematics: { 
                title: "📊 Bidang Matematik", 
                description: "Ahli Matematik adalah pemecah kod alam semesta. Mereka menggunakan nombor dan corak untuk menyelesaikan beberapa masalah paling sukar di dunia, daripada meramal cuaca hinggalah kepada mereka bentuk algoritma untuk aplikasi telefon pintar.", 
                careers: [ 
                    { name: "Penganalisis Data 📈", description: "Menjadi seperti detektif data, mencari corak dan cerita tersembunyi di dalam lautan nombor untuk membantu syarikat membuat keputusan yang bijak.", kemahiran: "Suka menyiasat, teliti, pandai bercerita dengan nombor.", subjek: "Matematik, TMK." }, 
                    { name: "Animator Komputer 🎬", description: "Menggunakan matematik (geometri dan algebra) untuk menggerakkan watak kartun, mencipta letupan CGI yang realistik dalam filem adiwira, dan membina dunia 3D yang menakjubkan.", kemahiran: "Pandai seni, pandai ruang, logik.", subjek: "Matematik, Seni." }, 
                    { name: "Aktuari 🎲", description: "Menggunakan matematik kebarangkalian untuk mengira risiko masa depan, seperti meramalkan kemungkinan berlakunya taufan atau kemalangan untuk membantu syarikat insurans.", kemahiran: "Suka meramal, pandai statistik, penyelesai masalah.", subjek: "Matematik, Ekonomi." },
                    { name: "Perancang Bandar 🗺️", description: "Menjadi arkitek untuk sebuah bandar, menyusun atur di mana patut ada taman, sekolah, dan jalan raya untuk mewujudkan komuniti yang selesa dan lestari.", kemahiran: "Berwawasan, pandai ruang, suka komuniti.", subjek: "Geografi, Matematik, Sejarah." },
                    { name: "Ahli Kriptografi 🔐", description: "Mencipta dan memecahkan kod rahsia yang sangat kompleks untuk melindungi maklumat dalam perbankan dalam talian, mesej rahsia tentera, dan komunikasi digital.", kemahiran: "Suka teka-teki, pemikiran abstrak, sangat teliti.", subjek: "Matematik (Aras Tinggi), Sains Komputer." },
                    { name: "Penganalisis Penyelidikan Pasaran 🛍️", description: "Mengkaji data jualan dan tinjauan pendapat pengguna untuk memberitahu syarikat produk apa yang orang ramai suka dan patut mereka cipta seterusnya.", kemahiran: "Suka menyiasat, pandai statistik, faham tingkah laku manusia.", subjek: "Matematik, Ekonomi, Perniagaan." }
                ] 
            }
        };

        let currentQuestionIndex = 0;
        let userAnswers = new Array(quizQuestions.length).fill(null);
        let quizScores = null;
        let resultsChartInstance = null;

        const quizIntro = document.getElementById('quiz-intro');
        const quizContent = document.getElementById('quiz-content');
        const quizResults = document.getElementById('quiz-results');

        function startQuiz() {
            quizIntro.classList.add('hidden');
            quizContent.classList.remove('hidden');
            quizResults.classList.add('hidden');
            currentQuestionIndex = 0;
            userAnswers.fill(null);
            displayQuestion();
        }
        function displayQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('current-question').textContent = currentQuestionIndex + 1;
            document.getElementById('question-text').textContent = question.question;
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            question.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option.text;
                button.className = 'w-full text-left p-4 rounded-lg option-btn';
                if (userAnswers[currentQuestionIndex] === option.field) {
                    button.classList.add('option-selected');
                }
                button.onclick = () => selectOption(option.field, button);
                optionsContainer.appendChild(button);
            });
            document.getElementById('progress-bar').style.width = `${((currentQuestionIndex + 1) / quizQuestions.length) * 100}%`;
            document.getElementById('prev-btn').disabled = currentQuestionIndex === 0;
            document.getElementById('next-btn').disabled = userAnswers[currentQuestionIndex] === null;
        }
        function selectOption(field, selectedButton) {
            userAnswers[currentQuestionIndex] = field;
            document.querySelectorAll('#options-container .option-btn').forEach(btn => btn.classList.remove('option-selected'));
            selectedButton.classList.add('option-selected');
            document.getElementById('next-btn').disabled = false;
            setTimeout(() => nextQuestion(), 300);
        }
        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                calculateResults();
            }
        }
        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
            }
        }
        function resetQuiz() {
            quizScores = null;
            quizResults.classList.add('hidden');
            quizIntro.classList.remove('hidden');
        }
        function calculateResults() {
            const scores = { science: 0, technology: 0, engineering: 0, mathematics: 0 };
            userAnswers.forEach(answer => { if (answer) scores[answer]++; });
            quizScores = scores;
            displayQuizResults();
        }
        function displayQuizResults() {
            quizContent.classList.add('hidden');
            quizResults.classList.remove('hidden');
            
            const sortedScores = Object.entries(quizScores).sort((a, b) => b[1] - a[1]);
            const topField = sortedScores[0][0];
            const topFieldDetails = careerDetails[topField];
            
            const fieldName = topFieldDetails.title.split(' ')[2] || topFieldDetails.title.split(' ')[1];

            const resultsContent = document.getElementById('results-content');
            resultsContent.innerHTML = `<p class="text-xl text-slate-300">Bidang yang paling sepadan dengan minat anda ialah:</p><div class="glass-effect p-6 rounded-lg inline-block"><h3 class="text-3xl font-bold ${getFieldColor(topField)}">${topFieldDetails.title}</h3></div><p class="max-w-xl mx-auto text-slate-400 mt-4">${topFieldDetails.description}</p><button onclick="showCareerDetails('${topField}')" class="mt-6 btn-glowing"><span class="font-semibold">Terokai Kerjaya dalam ${fieldName}</span></button>`;

            renderResultsChart();

            const detailedResultsContainer = document.getElementById('detailed-results');
            detailedResultsContainer.innerHTML = '';
            sortedScores.forEach(([field, score]) => {
                const percentage = (score / quizQuestions.length) * 100;
                detailedResultsContainer.innerHTML += `<div class="glass-effect p-4 rounded-lg"><div class="flex justify-between items-center mb-2"><h4 class="font-bold text-lg ${getFieldColor(field)}">${careerDetails[field].title}</h4><span class="font-semibold text-slate-300">${percentage.toFixed(0)}%</span></div><div class="bg-slate-700 rounded-full h-2.5"><div class="h-2.5 rounded-full ${getFieldGradient(field)}" style="width: ${percentage}%"></div></div></div>`;
            });
        }
        
        function renderResultsChart() {
            const ctx = document.getElementById('resultsChart').getContext('2d');
            if (resultsChartInstance) { resultsChartInstance.destroy(); }
            const chartColors = [getComputedStyle(document.documentElement).getPropertyValue('--c-science'), getComputedStyle(document.documentElement).getPropertyValue('--c-tech'), getComputedStyle(document.documentElement).getPropertyValue('--c-eng'), getComputedStyle(document.documentElement).getPropertyValue('--c-math')];
            resultsChartInstance = new Chart(ctx, { 
                type: 'bar', 
                data: { 
                    labels: ['Sains', 'Teknologi', 'Kejuruteraan', 'Matematik'], 
                    datasets: [{ 
                        label: 'Skor Minat Anda', 
                        data: [quizScores.science, quizScores.technology, quizScores.engineering, quizScores.mathematics], 
                        backgroundColor: chartColors.map(c => c + '99'),
                        borderColor: chartColors,
                        borderWidth: 2, 
                        borderRadius: 5 
                    }] 
                }, 
                options: { 
                    responsive: true, 
                    maintainAspectRatio: false, 
                    indexAxis: 'y', 
                    scales: { 
                        x: { beginAtZero: true, max: 10, grid: { color: 'rgba(255, 255, 255, 0.1)' }, ticks: { color: '#e2e8f0', font: { size: 14 } } }, 
                        y: { grid: { color: 'rgba(255, 255, 255, 0.1)' }, ticks: { color: '#e2e8f0', font: { size: 14 } } } 
                    }, 
                    plugins: { 
                        legend: { display: false }, 
                        datalabels: { color: '#fff', anchor: 'end', align: 'end', formatter: (value) => value > 0 ? value : '', font: { weight: 'bold', size: 14 } } 
                    } 
                }, 
                plugins: [ChartDataLabels] 
            });
        }

        function showCareerDetails(field) {
            const details = careerDetails[field];
            const modalTitle = document.getElementById('modal-title');
            modalTitle.innerHTML = details.title;
            modalTitle.className = `text-2xl md:text-3xl font-bold ${getFieldColor(field)}`;

            let careersHtml = `<p class="text-slate-300 text-base md:text-lg text-center mb-6">${details.description}</p><h3 class="font-bold text-xl mb-4 text-slate-200 text-center">Contoh Kerjaya Hebat:</h3><div class="space-y-6">`;
            
            details.careers.forEach(career => {
                careersHtml += `
                <div class="career-card">
                    <h4 class="text-xl md:text-2xl font-bold text-white mb-2">${career.name}</h4>
                    <p class="text-slate-400 mb-4">${career.description}</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div class="inner-card">
                            <h5 class="font-bold text-slate-200 mb-1 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" /></svg>Kemahiran Diperlukan</h5>
                            <p class="text-slate-300 pl-7">${career.kemahiran}</p>
                        </div>
                        <div class="inner-card">
                            <h5 class="font-bold text-slate-200 mb-1 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 011.05-.632l1.18.236a1 1 0 001.057-.945l.237-1.181a.999.999 0 01.632-1.05l2.408-.482a1 1 0 00.945-1.057l-1.182-5.911zM10 12a2 2 0 100-4 2 2 0 000 4z" /><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.475 4.475 0 00-1.745.924a1 1 0 101.298 1.514 2.475 2.475 0 013.49 0 1 1 0 101.298-1.514A4.475 4.475 0 0011 5.092V5z" clip-rule="evenodd" /></svg>Subjek Penting</h5>
                            <p class="text-slate-300 pl-7">${career.subjek}</p>
                        </div>
                    </div>
                </div>`;
            });

            careersHtml += `</div>`;
            document.getElementById('modal-content-body').innerHTML = careersHtml;
            openModal('career-modal');
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            const modalContent = modal.querySelector('.glass-effect');
            if (modalContent) {
                modalContent.classList.remove('modal-enter');
                modalContent.classList.add('modal-exit');
            }
            setTimeout(() => {
                modal.classList.add('hidden');
                if (modalContent) modalContent.classList.remove('modal-exit');
            }, 500);
            document.body.style.overflow = '';
        }
        function getFieldColor(field) { return { science: 'text-cyan-400', technology: 'text-green-400', engineering: 'text-orange-400', mathematics: 'text-purple-400' }[field]; }
        function getFieldGradient(field) { return { science: 'bg-gradient-to-r from-cyan-500 to-blue-500', technology: 'bg-gradient-to-r from-green-500 to-emerald-500', engineering: 'bg-gradient-to-r from-orange-500 to-amber-500', mathematics: 'bg-gradient-to-r from-purple-500 to-violet-500' }[field]; }
    </script>
</body>
</html>




